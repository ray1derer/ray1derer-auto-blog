<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì œ14ê°•: API ê°œë°œê³¼ ë¬¸ì„œí™” | Cursor AI ë§ˆìŠ¤í„° í´ë˜ìŠ¤</title>
    <link rel="stylesheet" href="../assets/lesson-style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="lesson-container">
        <header class="lesson-header">
            <div class="lesson-title">
                <h1><i class="fas fa-plug"></i> ì œ14ê°•: API ê°œë°œê³¼ ë¬¸ì„œí™”</h1>
                <p class="lesson-subtitle">AIë¡œ RESTful APIë¥¼ ì„¤ê³„í•˜ê³  ìë™ìœ¼ë¡œ ë¬¸ì„œí™”í•˜ê¸°</p>
            </div>
            <div class="lesson-meta">
                <span class="difficulty"><i class="fas fa-signal"></i> ë‚œì´ë„: ì¤‘ê¸‰</span>
                <span class="duration"><i class="fas fa-clock"></i> ì˜ˆìƒ ì‹œê°„: 50ë¶„</span>
                <span class="category"><i class="fas fa-folder"></i> ì¹´í…Œê³ ë¦¬: ì¤‘ê¸‰</span>
            </div>
        </header>

        <nav class="lesson-nav">
            <a href="lesson13.html" class="nav-link prev">
                <i class="fas fa-chevron-left"></i> ì´ì „ ê°•ì˜
            </a>
            <span class="nav-title">ì œ14ê°•: API ê°œë°œê³¼ ë¬¸ì„œí™”</span>
            <a href="lesson15.html" class="nav-link next">
                ë‹¤ìŒ ê°•ì˜ <i class="fas fa-chevron-right"></i>
            </a>
        </nav>

        <main class="lesson-content">
            <section class="learning-objectives">
                <h2><i class="fas fa-bullseye"></i> í•™ìŠµ ëª©í‘œ</h2>
                <ul>
                    <li>AIë¥¼ í™œìš©í•œ RESTful API ì„¤ê³„ ì›ì¹™ ì´í•´í•˜ê¸°</li>
                    <li>OpenAPI(Swagger) ëª…ì„¸ ìë™ ìƒì„±í•˜ê¸°</li>
                    <li>API ë³´ì•ˆê³¼ ì¸ì¦ êµ¬í˜„í•˜ê¸°</li>
                    <li>ìë™í™”ëœ API í…ŒìŠ¤íŠ¸ ì‘ì„±í•˜ê¸°</li>
                    <li>ì‹¤ì‹œê°„ API ë¬¸ì„œ ìƒì„±ê³¼ ìœ ì§€ë³´ìˆ˜í•˜ê¸°</li>
                </ul>
            </section>

            <section class="content-section">
                <h2><i class="fas fa-project-diagram"></i> AI ê¸°ë°˜ API ì„¤ê³„</h2>
                
                <div class="info-box">
                    <p>Cursor AIëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ì„ ë¶„ì„í•˜ì—¬ RESTful ì›ì¹™ì„ ë”°ë¥´ëŠ” APIë¥¼ ì„¤ê³„í•˜ê³ , ìë™ìœ¼ë¡œ ë¬¸ì„œí™”í•©ë‹ˆë‹¤. ì—”ë“œí¬ì¸íŠ¸ êµ¬ì¡°, ë°ì´í„° ëª¨ë¸, ë³´ì•ˆ ì •ì±…ê¹Œì§€ ì¢…í•©ì ìœ¼ë¡œ ê³ ë ¤í•©ë‹ˆë‹¤.</p>
                </div>

                <h3>API ì„¤ê³„ í”„ë¡œì„¸ìŠ¤</h3>
                <div class="api-design-process">
                    <div class="design-example">
                        <h4>ìš”êµ¬ì‚¬í•­: ë¸”ë¡œê·¸ API ì„¤ê³„</h4>
                        <div class="requirements">
                            <p>ë‹¤ìŒ ê¸°ëŠ¥ì´ í•„ìš”í•œ ë¸”ë¡œê·¸ APIë¥¼ ì„¤ê³„í•´ì£¼ì„¸ìš”:</p>
                            <ul>
                                <li>ì‚¬ìš©ì ë“±ë¡/ë¡œê·¸ì¸</li>
                                <li>ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ CRUD</li>
                                <li>ëŒ“ê¸€ ê¸°ëŠ¥</li>
                                <li>ì¹´í…Œê³ ë¦¬ì™€ íƒœê·¸</li>
                                <li>ê²€ìƒ‰ê³¼ í•„í„°ë§</li>
                            </ul>
                        </div>

                        <div class="ai-generated-api">
                            <h4>AIê°€ ìƒì„±í•œ API êµ¬ì¡°</h4>
                            <pre><code># API ì—”ë“œí¬ì¸íŠ¸ ì„¤ê³„

## ì¸ì¦ (Authentication)
POST   /api/auth/register     # íšŒì›ê°€ì…
POST   /api/auth/login        # ë¡œê·¸ì¸
POST   /api/auth/refresh      # í† í° ê°±ì‹ 
POST   /api/auth/logout       # ë¡œê·¸ì•„ì›ƒ

## ì‚¬ìš©ì (Users)
GET    /api/users            # ì‚¬ìš©ì ëª©ë¡
GET    /api/users/:id        # ì‚¬ìš©ì ìƒì„¸
PUT    /api/users/:id        # ì‚¬ìš©ì ì •ë³´ ìˆ˜ì •
DELETE /api/users/:id        # ê³„ì • ì‚­ì œ

## í¬ìŠ¤íŠ¸ (Posts)
GET    /api/posts           # í¬ìŠ¤íŠ¸ ëª©ë¡ (í˜ì´ì§•, í•„í„°ë§)
POST   /api/posts           # í¬ìŠ¤íŠ¸ ì‘ì„±
GET    /api/posts/:id       # í¬ìŠ¤íŠ¸ ìƒì„¸
PUT    /api/posts/:id       # í¬ìŠ¤íŠ¸ ìˆ˜ì •
DELETE /api/posts/:id       # í¬ìŠ¤íŠ¸ ì‚­ì œ
GET    /api/posts/search    # í¬ìŠ¤íŠ¸ ê²€ìƒ‰

## ëŒ“ê¸€ (Comments)
GET    /api/posts/:postId/comments      # ëŒ“ê¸€ ëª©ë¡
POST   /api/posts/:postId/comments      # ëŒ“ê¸€ ì‘ì„±
PUT    /api/comments/:id                # ëŒ“ê¸€ ìˆ˜ì •
DELETE /api/comments/:id                # ëŒ“ê¸€ ì‚­ì œ

## ì¹´í…Œê³ ë¦¬ (Categories)
GET    /api/categories      # ì¹´í…Œê³ ë¦¬ ëª©ë¡
POST   /api/categories      # ì¹´í…Œê³ ë¦¬ ìƒì„±
PUT    /api/categories/:id  # ì¹´í…Œê³ ë¦¬ ìˆ˜ì •
DELETE /api/categories/:id  # ì¹´í…Œê³ ë¦¬ ì‚­ì œ

## íƒœê·¸ (Tags)
GET    /api/tags           # íƒœê·¸ ëª©ë¡
GET    /api/tags/popular   # ì¸ê¸° íƒœê·¸</code></pre>
                        </div>

                        <div class="data-models">
                            <h4>ë°ì´í„° ëª¨ë¸ (TypeScript)</h4>
                            <pre><code>// API ì‘ë‹µ íƒ€ì… ì •ì˜
interface ApiResponse<T> {
    success: boolean;
    data?: T;
    error?: {
        code: string;
        message: string;
        details?: any;
    };
    meta?: {
        page?: number;
        limit?: number;
        total?: number;
    };
}

// ì—”í‹°í‹° ëª¨ë¸
interface User {
    id: string;
    username: string;
    email: string;
    avatar?: string;
    bio?: string;
    createdAt: Date;
    updatedAt: Date;
}

interface Post {
    id: string;
    title: string;
    slug: string;
    content: string;
    excerpt?: string;
    coverImage?: string;
    author: User;
    category?: Category;
    tags: Tag[];
    status: 'draft' | 'published' | 'archived';
    publishedAt?: Date;
    createdAt: Date;
    updatedAt: Date;
    commentCount: number;
    viewCount: number;
}

interface Comment {
    id: string;
    content: string;
    author: User;
    post: Post;
    parentId?: string; // ëŒ€ëŒ“ê¸€ ì§€ì›
    createdAt: Date;
    updatedAt: Date;
}

interface Category {
    id: string;
    name: string;
    slug: string;
    description?: string;
    parentId?: string; // ê³„ì¸µ êµ¬ì¡° ì§€ì›
}

interface Tag {
    id: string;
    name: string;
    slug: string;
}</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <section class="content-section">
                <h2><i class="fas fa-code"></i> Express.js API êµ¬í˜„</h2>

                <div class="api-implementation">
                    <h3>AIê°€ ìƒì„±í•œ ì»¨íŠ¸ë¡¤ëŸ¬ ì½”ë“œ</h3>
                    
                    <div class="controller-example">
                        <h4>í¬ìŠ¤íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬</h4>
                        <pre><code>// controllers/postController.ts
import { Request, Response, NextFunction } from 'express';
import { PostService } from '../services/postService';
import { ApiResponse } from '../types/api';
import { validatePost } from '../validators/postValidator';
import { cache } from '../middleware/cache';

export class PostController {
    constructor(private postService: PostService) {}

    /**
     * @swagger
     * /api/posts:
     *   get:
     *     summary: í¬ìŠ¤íŠ¸ ëª©ë¡ ì¡°íšŒ
     *     tags: [Posts]
     *     parameters:
     *       - in: query
     *         name: page
     *         schema:
     *           type: integer
     *           default: 1
     *       - in: query
     *         name: limit
     *         schema:
     *           type: integer
     *           default: 10
     *       - in: query
     *         name: category
     *         schema:
     *           type: string
     *       - in: query
     *         name: tags
     *         schema:
     *           type: array
     *           items:
     *             type: string
     *       - in: query
     *         name: status
     *         schema:
     *           type: string
     *           enum: [draft, published, archived]
     *     responses:
     *       200:
     *         description: í¬ìŠ¤íŠ¸ ëª©ë¡
     *         content:
     *           application/json:
     *             schema:
     *               $ref: '#/components/schemas/PostListResponse'
     */
    @cache({ ttl: 300 }) // 5ë¶„ ìºì‹±
    async getPosts(req: Request, res: Response, next: NextFunction) {
        try {
            const {
                page = 1,
                limit = 10,
                category,
                tags,
                status = 'published',
                sort = '-publishedAt'
            } = req.query;

            const filters = {
                status,
                ...(category && { category }),
                ...(tags && { tags: { $in: Array.isArray(tags) ? tags : [tags] } })
            };

            const posts = await this.postService.findPosts({
                filters,
                page: Number(page),
                limit: Number(limit),
                sort
            });

            const response: ApiResponse<typeof posts> = {
                success: true,
                data: posts.data,
                meta: {
                    page: posts.page,
                    limit: posts.limit,
                    total: posts.total
                }
            };

            res.json(response);
        } catch (error) {
            next(error);
        }
    }

    /**
     * @swagger
     * /api/posts:
     *   post:
     *     summary: ìƒˆ í¬ìŠ¤íŠ¸ ì‘ì„±
     *     tags: [Posts]
     *     security:
     *       - bearerAuth: []
     *     requestBody:
     *       required: true
     *       content:
     *         application/json:
     *           schema:
     *             $ref: '#/components/schemas/CreatePostRequest'
     *     responses:
     *       201:
     *         description: ìƒì„±ëœ í¬ìŠ¤íŠ¸
     *       400:
     *         description: ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨
     *       401:
     *         description: ì¸ì¦ í•„ìš”
     */
    async createPost(req: Request, res: Response, next: NextFunction) {
        try {
            const validation = validatePost(req.body);
            if (!validation.valid) {
                return res.status(400).json({
                    success: false,
                    error: {
                        code: 'VALIDATION_ERROR',
                        message: 'Invalid post data',
                        details: validation.errors
                    }
                });
            }

            const post = await this.postService.createPost({
                ...req.body,
                authorId: req.user.id
            });

            res.status(201).json({
                success: true,
                data: post
            });
        } catch (error) {
            next(error);
        }
    }

    /**
     * @swagger
     * /api/posts/{id}:
     *   get:
     *     summary: í¬ìŠ¤íŠ¸ ìƒì„¸ ì¡°íšŒ
     *     tags: [Posts]
     *     parameters:
     *       - in: path
     *         name: id
     *         required: true
     *         schema:
     *           type: string
     *     responses:
     *       200:
     *         description: í¬ìŠ¤íŠ¸ ìƒì„¸
     *       404:
     *         description: í¬ìŠ¤íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ
     */
    async getPost(req: Request, res: Response, next: NextFunction) {
        try {
            const { id } = req.params;
            const post = await this.postService.findPostById(id);

            if (!post) {
                return res.status(404).json({
                    success: false,
                    error: {
                        code: 'NOT_FOUND',
                        message: 'Post not found'
                    }
                });
            }

            // ì¡°íšŒìˆ˜ ì¦ê°€ (ë¹„ë™ê¸°ë¡œ ì²˜ë¦¬)
            this.postService.incrementViewCount(id).catch(console.error);

            res.json({
                success: true,
                data: post
            });
        } catch (error) {
            next(error);
        }
    }

    // ë‚˜ë¨¸ì§€ CRUD ë©”ì„œë“œë“¤...
}</code></pre>
                    </div>

                    <h3>ë¯¸ë“¤ì›¨ì–´ì™€ ë³´ì•ˆ</h3>
                    <div class="security-implementation">
                        <h4>ì¸ì¦ ë¯¸ë“¤ì›¨ì–´</h4>
                        <pre><code>// middleware/auth.ts
import jwt from 'jsonwebtoken';
import { Request, Response, NextFunction } from 'express';

interface JwtPayload {
    userId: string;
    email: string;
}

declare global {
    namespace Express {
        interface Request {
            user?: JwtPayload;
        }
    }
}

export const authenticate = async (
    req: Request,
    res: Response,
    next: NextFunction
) => {
    try {
        const token = req.headers.authorization?.split(' ')[1];
        
        if (!token) {
            return res.status(401).json({
                success: false,
                error: {
                    code: 'UNAUTHORIZED',
                    message: 'Authentication required'
                }
            });
        }

        const decoded = jwt.verify(
            token,
            process.env.JWT_SECRET!
        ) as JwtPayload;
        
        req.user = decoded;
        next();
    } catch (error) {
        if (error instanceof jwt.TokenExpiredError) {
            return res.status(401).json({
                success: false,
                error: {
                    code: 'TOKEN_EXPIRED',
                    message: 'Token has expired'
                }
            });
        }
        
        return res.status(401).json({
            success: false,
            error: {
                code: 'INVALID_TOKEN',
                message: 'Invalid authentication token'
            }
        });
    }
};

// Rate limiting
import rateLimit from 'express-rate-limit';

export const apiLimiter = rateLimit({
    windowMs: 15 * 60 * 1000, // 15ë¶„
    max: 100, // ìµœëŒ€ 100ê°œ ìš”ì²­
    message: {
        success: false,
        error: {
            code: 'RATE_LIMIT_EXCEEDED',
            message: 'Too many requests, please try again later'
        }
    },
    standardHeaders: true,
    legacyHeaders: false,
});

// ë³´ì•ˆ í—¤ë”
import helmet from 'helmet';
export const securityHeaders = helmet({
    contentSecurityPolicy: {
        directives: {
            defaultSrc: ["'self'"],
            styleSrc: ["'self'", "'unsafe-inline'"],
            scriptSrc: ["'self'"],
            imgSrc: ["'self'", "data:", "https:"],
        },
    },
});

// CORS ì„¤ì •
import cors from 'cors';
export const corsOptions: cors.CorsOptions = {
    origin: process.env.ALLOWED_ORIGINS?.split(',') || '*',
    credentials: true,
    methods: ['GET', 'POST', 'PUT', 'DELETE', 'PATCH'],
    allowedHeaders: ['Content-Type', 'Authorization'],
    exposedHeaders: ['X-Total-Count', 'X-Page-Count']
};</code></pre>
                    </div>
                </div>
            </section>

            <section class="content-section">
                <h2><i class="fas fa-book"></i> OpenAPI ë¬¸ì„œ ìë™ ìƒì„±</h2>

                <div class="api-documentation">
                    <h3>Swagger ì„¤ì •ê³¼ ë¬¸ì„œí™”</h3>
                    
                    <div class="swagger-setup">
                        <pre><code>// swagger.config.ts
import swaggerJsdoc from 'swagger-jsdoc';
import swaggerUi from 'swagger-ui-express';
import { Express } from 'express';

const options: swaggerJsdoc.Options = {
    definition: {
        openapi: '3.0.0',
        info: {
            title: 'Blog API',
            version: '1.0.0',
            description: 'A comprehensive blog API with authentication, posts, comments, and more',
            contact: {
                name: 'API Support',
                email: 'api@example.com'
            }
        },
        servers: [
            {
                url: 'http://localhost:3000',
                description: 'Development server'
            },
            {
                url: 'https://api.example.com',
                description: 'Production server'
            }
        ],
        components: {
            securitySchemes: {
                bearerAuth: {
                    type: 'http',
                    scheme: 'bearer',
                    bearerFormat: 'JWT'
                }
            },
            schemas: {
                Error: {
                    type: 'object',
                    properties: {
                        success: { type: 'boolean', example: false },
                        error: {
                            type: 'object',
                            properties: {
                                code: { type: 'string' },
                                message: { type: 'string' },
                                details: { type: 'object' }
                            }
                        }
                    }
                },
                Post: {
                    type: 'object',
                    properties: {
                        id: { type: 'string', format: 'uuid' },
                        title: { type: 'string' },
                        slug: { type: 'string' },
                        content: { type: 'string' },
                        excerpt: { type: 'string' },
                        coverImage: { type: 'string', format: 'uri' },
                        author: { $ref: '#/components/schemas/User' },
                        category: { $ref: '#/components/schemas/Category' },
                        tags: {
                            type: 'array',
                            items: { $ref: '#/components/schemas/Tag' }
                        },
                        status: {
                            type: 'string',
                            enum: ['draft', 'published', 'archived']
                        },
                        publishedAt: { type: 'string', format: 'date-time' },
                        createdAt: { type: 'string', format: 'date-time' },
                        updatedAt: { type: 'string', format: 'date-time' }
                    }
                }
                // ë” ë§ì€ ìŠ¤í‚¤ë§ˆ ì •ì˜...
            }
        }
    },
    apis: ['./src/controllers/*.ts', './src/routes/*.ts']
};

const specs = swaggerJsdoc(options);

export function setupSwagger(app: Express) {
    app.use('/api-docs', swaggerUi.serve, swaggerUi.setup(specs, {
        customCss: '.swagger-ui .topbar { display: none }',
        customSiteTitle: 'Blog API Documentation'
    }));
    
    // JSON í˜•ì‹ìœ¼ë¡œë„ ì œê³µ
    app.get('/api-docs.json', (req, res) => {
        res.setHeader('Content-Type', 'application/json');
        res.send(specs);
    });
}</code></pre>
                    </div>

                    <h3>API ë¬¸ì„œ ìë™ ìƒì„± ê²°ê³¼</h3>
                    <div class="swagger-ui-preview">
                        <img src="../assets/swagger-preview.png" alt="Swagger UI Preview" />
                        <p>Swagger UIë¥¼ í†µí•´ APIë¥¼ ì‹œê°ì ìœ¼ë¡œ íƒìƒ‰í•˜ê³  í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                    </div>
                </div>
            </section>

            <section class="content-section">
                <h2><i class="fas fa-vial"></i> API í…ŒìŠ¤íŠ¸ ìë™í™”</h2>

                <div class="api-testing">
                    <h3>í†µí•© í…ŒìŠ¤íŠ¸ ì‘ì„±</h3>
                    
                    <pre><code>// __tests__/api/posts.test.ts
import request from 'supertest';
import { app } from '../../src/app';
import { setupTestDatabase, teardownTestDatabase } from '../utils/testDb';
import { generateAuthToken } from '../utils/auth';

describe('Posts API', () => {
    let authToken: string;
    let testUserId: string;
    
    beforeAll(async () => {
        await setupTestDatabase();
        const { token, userId } = await generateAuthToken();
        authToken = token;
        testUserId = userId;
    });
    
    afterAll(async () => {
        await teardownTestDatabase();
    });
    
    describe('POST /api/posts', () => {
        it('should create a new post with valid data', async () => {
            const postData = {
                title: 'Test Post',
                content: 'This is a test post content',
                categoryId: 'test-category-id',
                tags: ['test', 'api']
            };
            
            const response = await request(app)
                .post('/api/posts')
                .set('Authorization', `Bearer ${authToken}`)
                .send(postData)
                .expect(201);
            
            expect(response.body).toMatchObject({
                success: true,
                data: {
                    title: postData.title,
                    content: postData.content,
                    author: {
                        id: testUserId
                    }
                }
            });
            
            expect(response.body.data).toHaveProperty('id');
            expect(response.body.data).toHaveProperty('slug');
        });
        
        it('should return 400 for invalid post data', async () => {
            const invalidData = {
                // title is missing
                content: 'Content without title'
            };
            
            const response = await request(app)
                .post('/api/posts')
                .set('Authorization', `Bearer ${authToken}`)
                .send(invalidData)
                .expect(400);
            
            expect(response.body).toMatchObject({
                success: false,
                error: {
                    code: 'VALIDATION_ERROR'
                }
            });
        });
        
        it('should return 401 without authentication', async () => {
            const response = await request(app)
                .post('/api/posts')
                .send({ title: 'Test', content: 'Test' })
                .expect(401);
            
            expect(response.body.error.code).toBe('UNAUTHORIZED');
        });
    });
    
    describe('GET /api/posts', () => {
        it('should return paginated posts', async () => {
            const response = await request(app)
                .get('/api/posts')
                .query({ page: 1, limit: 10 })
                .expect(200);
            
            expect(response.body).toMatchObject({
                success: true,
                data: expect.any(Array),
                meta: {
                    page: 1,
                    limit: 10,
                    total: expect.any(Number)
                }
            });
        });
        
        it('should filter posts by category', async () => {
            const response = await request(app)
                .get('/api/posts')
                .query({ category: 'technology' })
                .expect(200);
            
            response.body.data.forEach(post => {
                expect(post.category.slug).toBe('technology');
            });
        });
        
        it('should search posts by keyword', async () => {
            const response = await request(app)
                .get('/api/posts/search')
                .query({ q: 'javascript' })
                .expect(200);
            
            expect(response.body.data).toBeInstanceOf(Array);
            // ê²€ìƒ‰ ê²°ê³¼ê°€ ìˆë‹¤ë©´ ê´€ë ¨ì„± í™•ì¸
            if (response.body.data.length > 0) {
                response.body.data.forEach(post => {
                    const hasKeyword = 
                        post.title.toLowerCase().includes('javascript') ||
                        post.content.toLowerCase().includes('javascript');
                    expect(hasKeyword).toBe(true);
                });
            }
        });
    });
});

// API ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
describe('API Performance', () => {
    it('should respond within acceptable time', async () => {
        const start = Date.now();
        
        await request(app)
            .get('/api/posts')
            .expect(200);
        
        const duration = Date.now() - start;
        expect(duration).toBeLessThan(200); // 200ms ì´ë‚´ ì‘ë‹µ
    });
    
    it('should handle concurrent requests', async () => {
        const requests = Array(10).fill(null).map(() => 
            request(app).get('/api/posts')
        );
        
        const responses = await Promise.all(requests);
        
        responses.forEach(response => {
            expect(response.status).toBe(200);
            expect(response.body.success).toBe(true);
        });
    });
});</code></pre>
                </div>
            </section>

            <section class="content-section">
                <h2><i class="fas fa-sync-alt"></i> API ë²„ì „ ê´€ë¦¬</h2>

                <div class="api-versioning">
                    <h3>ë²„ì „ ê´€ë¦¬ ì „ëµ</h3>
                    
                    <pre><code>// routes/index.ts
import { Router } from 'express';
import v1Routes from './v1';
import v2Routes from './v2';

const router = Router();

// ë²„ì „ë³„ ë¼ìš°íŒ…
router.use('/api/v1', v1Routes);
router.use('/api/v2', v2Routes);

// ê¸°ë³¸ ë²„ì „ (ìµœì‹ )
router.use('/api', v2Routes);

// ë²„ì „ ì •ë³´ ì—”ë“œí¬ì¸íŠ¸
router.get('/api/version', (req, res) => {
    res.json({
        current: 'v2',
        supported: ['v1', 'v2'],
        deprecated: [],
        sunset: {
            v1: '2025-01-01'
        }
    });
});

// routes/v2/posts.ts
import { Router } from 'express';
import { PostControllerV2 } from '../../controllers/v2/postController';

const router = Router();
const controller = new PostControllerV2();

// V2ì—ì„œ ì¶”ê°€ëœ ê¸°ëŠ¥
router.get('/posts', controller.getPosts); // í–¥ìƒëœ í•„í„°ë§
router.get('/posts/:id', controller.getPost);
router.post('/posts', authenticate, controller.createPost);
router.put('/posts/:id', authenticate, controller.updatePost);
router.delete('/posts/:id', authenticate, controller.deletePost);

// V2 ì „ìš© ìƒˆ ê¸°ëŠ¥
router.post('/posts/:id/publish', authenticate, controller.publishPost);
router.post('/posts/:id/schedule', authenticate, controller.schedulePost);
router.get('/posts/:id/analytics', authenticate, controller.getPostAnalytics);

export default router;</code></pre>
                </div>
            </section>

            <section class="practice">
                <h2><i class="fas fa-laptop-code"></i> ì‹¤ìŠµ: ì™„ì „í•œ API êµ¬ì¶•</h2>

                <div class="practice-content">
                    <h3>í•  ì¼ ê´€ë¦¬ API ë§Œë“¤ê¸°</h3>
                    <p>AIì™€ í•¨ê»˜ ì™„ì „í•œ Todo APIë¥¼ êµ¬ì¶•í•´ë´…ì‹œë‹¤.</p>

                    <div class="practice-requirements">
                        <h4>ìš”êµ¬ì‚¬í•­</h4>
                        <ul>
                            <li>ì‚¬ìš©ì ì¸ì¦ (JWT)</li>
                            <li>Todo CRUD ì‘ì—…</li>
                            <li>ì¹´í…Œê³ ë¦¬ë³„ ë¶„ë¥˜</li>
                            <li>ìš°ì„ ìˆœìœ„ ê´€ë¦¬</li>
                            <li>ë§ˆê°ì¼ ì•Œë¦¼</li>
                            <li>ê³µìœ  ê¸°ëŠ¥</li>
                        </ul>
                    </div>

                    <div class="practice-steps">
                        <h4>êµ¬í˜„ ë‹¨ê³„</h4>
                        
                        <div class="step">
                            <h5>1. API ì„¤ê³„</h5>
                            <p>Chatì— ìš”ì²­: "Todo ê´€ë¦¬ APIì˜ RESTful ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì„¤ê³„í•´ì¤˜"</p>
                        </div>
                        
                        <div class="step">
                            <h5>2. ë°ì´í„° ëª¨ë¸</h5>
                            <p>Composer ì‚¬ìš©: "Todo, User, Category ëª¨ë¸ê³¼ ê´€ê³„ë¥¼ ì •ì˜í•´ì¤˜"</p>
                        </div>
                        
                        <div class="step">
                            <h5>3. ì»¨íŠ¸ë¡¤ëŸ¬ êµ¬í˜„</h5>
                            <p>Cmd+K: "Express ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ë¯¸ë“¤ì›¨ì–´ë¥¼ êµ¬í˜„í•´ì¤˜"</p>
                        </div>
                        
                        <div class="step">
                            <h5>4. ë¬¸ì„œí™”</h5>
                            <p>AIì—ê²Œ: "Swagger ë¬¸ì„œë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ì„¤ì •ì„ ì¶”ê°€í•´ì¤˜"</p>
                        </div>
                        
                        <div class="step">
                            <h5>5. í…ŒìŠ¤íŠ¸</h5>
                            <p>í…ŒìŠ¤íŠ¸ ì‘ì„±: "ê° ì—”ë“œí¬ì¸íŠ¸ì— ëŒ€í•œ í†µí•© í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•´ì¤˜"</p>
                        </div>
                    </div>

                    <div class="bonus-features">
                        <h4>ğŸŒŸ ë³´ë„ˆìŠ¤ ê¸°ëŠ¥</h4>
                        <ul>
                            <li>WebSocketìœ¼ë¡œ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸</li>
                            <li>GraphQL ë²„ì „ ì¶”ê°€</li>
                            <li>íŒŒì¼ ì—…ë¡œë“œ (ì²¨ë¶€íŒŒì¼)</li>
                            <li>ì´ë©”ì¼ ì•Œë¦¼ í†µí•©</li>
                            <li>OAuth2 ì†Œì…œ ë¡œê·¸ì¸</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section class="summary">
                <h2><i class="fas fa-check-circle"></i> í•µì‹¬ ì •ë¦¬</h2>
                
                <div class="key-points">
                    <div class="point">
                        <i class="fas fa-star"></i>
                        <h3>ìë™ API ì„¤ê³„</h3>
                        <p>ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ì„ ë°”íƒ•ìœ¼ë¡œ RESTful ì›ì¹™ì„ ë”°ë¥´ëŠ” APIë¥¼ ìë™ìœ¼ë¡œ ì„¤ê³„í•©ë‹ˆë‹¤.</p>
                    </div>
                    
                    <div class="point">
                        <i class="fas fa-star"></i>
                        <h3>ë¬¸ì„œ ìë™ ìƒì„±</h3>
                        <p>ì½”ë“œì—ì„œ OpenAPI ëª…ì„¸ë¥¼ ìë™ìœ¼ë¡œ ì¶”ì¶œí•˜ì—¬ í•­ìƒ ìµœì‹  ë¬¸ì„œë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.</p>
                    </div>
                    
                    <div class="point">
                        <i class="fas fa-star"></i>
                        <h3>ë³´ì•ˆ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤</h3>
                        <p>ì¸ì¦, ê¶Œí•œ ë¶€ì—¬, ì†ë„ ì œí•œ ë“± ë³´ì•ˆ ê¸°ëŠ¥ì„ ìë™ìœ¼ë¡œ êµ¬í˜„í•©ë‹ˆë‹¤.</p>
                    </div>
                    
                    <div class="point">
                        <i class="fas fa-star"></i>
                        <h3>í…ŒìŠ¤íŠ¸ ìë™í™”</h3>
                        <p>ì—”ë“œí¬ì¸íŠ¸ë³„ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•˜ì—¬ API í’ˆì§ˆì„ ë³´ì¥í•©ë‹ˆë‹¤.</p>
                    </div>
                </div>

                <div class="next-steps">
                    <h3>ë‹¤ìŒ ê°•ì˜ ì˜ˆê³ </h3>
                    <p>ë‹¤ìŒ ê°•ì˜ì—ì„œëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ì™€ ìµœì í™”ë¥¼ AIì™€ í•¨ê»˜ ìˆ˜í–‰í•˜ëŠ” ë°©ë²•ì„ ë°°ì›ë‹ˆë‹¤.</p>
                    <a href="lesson15.html" class="btn btn-primary">
                        <i class="fas fa-arrow-right"></i> ë‹¤ìŒ ê°•ì˜ë¡œ ì´ë™
                    </a>
                </div>
            </section>
        </main>

        <aside class="sidebar">
            <div class="sidebar-section">
                <h3><i class="fas fa-list"></i> ê°•ì˜ ëª©ì°¨</h3>
                <ol class="lesson-list">
                    <li class="completed">Cursor ì†Œê°œì™€ ì„¤ì¹˜</li>
                    <li class="completed">ì²« ë²ˆì§¸ AI ìë™ì™„ì„±</li>
                    <li class="completed">AI Chat ë§ˆìŠ¤í„°í•˜ê¸°</li>
                    <li class="completed">Cmd+K ì™„ë²½ ê°€ì´ë“œ</li>
                    <li class="completed">í”„ë¡œì íŠ¸ ì»¨í…ìŠ¤íŠ¸</li>
                    <li class="completed">AI ëª¨ë¸ ì„ íƒê³¼ í™œìš©</li>
                    <li class="completed">Composer ê¸°ëŠ¥ í™œìš©</li>
                    <li class="completed">í„°ë¯¸ë„ í†µí•©</li>
                    <li class="completed">ë””ë²„ê¹…ê³¼ ì—ëŸ¬ í•´ê²°</li>
                    <li class="completed">ë‹¨ì¶•í‚¤ì™€ ì„¤ì • ìµœì í™”</li>
                    <li class="completed">Git í†µí•©ê³¼ ë²„ì „ ê´€ë¦¬</li>
                    <li class="completed">í…ŒìŠ¤íŠ¸ ì‘ì„±ê³¼ TDD</li>
                    <li class="completed">ë¦¬íŒ©í† ë§ê³¼ ì½”ë“œ í’ˆì§ˆ</li>
                    <li class="current">API ê°œë°œê³¼ ë¬¸ì„œí™”</li>
                </ol>
            </div>

            <div class="sidebar-section">
                <h3><i class="fas fa-plug"></i> HTTP ë©”ì„œë“œ</h3>
                <div class="http-methods">
                    <div class="method-item">
                        <span class="method get">GET</span>
                        <span>ë¦¬ì†ŒìŠ¤ ì¡°íšŒ</span>
                    </div>
                    <div class="method-item">
                        <span class="method post">POST</span>
                        <span>ë¦¬ì†ŒìŠ¤ ìƒì„±</span>
                    </div>
                    <div class="method-item">
                        <span class="method put">PUT</span>
                        <span>ë¦¬ì†ŒìŠ¤ ì „ì²´ ìˆ˜ì •</span>
                    </div>
                    <div class="method-item">
                        <span class="method patch">PATCH</span>
                        <span>ë¦¬ì†ŒìŠ¤ ë¶€ë¶„ ìˆ˜ì •</span>
                    </div>
                    <div class="method-item">
                        <span class="method delete">DELETE</span>
                        <span>ë¦¬ì†ŒìŠ¤ ì‚­ì œ</span>
                    </div>
                </div>
            </div>

            <div class="sidebar-section">
                <h3><i class="fas fa-lightbulb"></i> í”„ë¡œ íŒ</h3>
                <div class="tip-box">
                    <p>ğŸ’¡ API ì„¤ê³„ ì‹œ ë²„ì „ ê´€ë¦¬ë¥¼ ì²˜ìŒë¶€í„° ê³ ë ¤í•˜ì„¸ìš”. /api/v1/ í˜•ì‹ìœ¼ë¡œ ì‹œì‘í•˜ë©´ ë‚˜ì¤‘ì— ë³€ê²½ì´ ì‰½ìŠµë‹ˆë‹¤.</p>
                </div>
            </div>
        </aside>

        <div class="progress-tracker">
            <div class="progress-bar" style="width: 46.67%"></div>
            <span class="progress-text">14/30 ì™„ë£Œ</span>
        </div>
    </div>

    <script src="../assets/lesson-script.js"></script>
</body>
</html>