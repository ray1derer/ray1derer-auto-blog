<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>제9강: 디버깅과 에러 해결 | Cursor AI 마스터 클래스</title>
    <link rel="stylesheet" href="../assets/lesson-style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="lesson-container">
        <header class="lesson-header">
            <div class="lesson-title">
                <h1><i class="fas fa-bug"></i> 제9강: 디버깅과 에러 해결</h1>
                <p class="lesson-subtitle">AI와 함께하는 스마트한 문제 해결 전략</p>
            </div>
            <div class="lesson-meta">
                <span class="difficulty"><i class="fas fa-signal"></i> 난이도: 초급</span>
                <span class="duration"><i class="fas fa-clock"></i> 예상 시간: 40분</span>
                <span class="category"><i class="fas fa-folder"></i> 카테고리: 기초</span>
            </div>
        </header>

        <nav class="lesson-nav">
            <a href="lesson08.html" class="nav-link prev">
                <i class="fas fa-chevron-left"></i> 이전 강의
            </a>
            <span class="nav-title">제9강: 디버깅과 에러 해결</span>
            <a href="lesson10.html" class="nav-link next">
                다음 강의 <i class="fas fa-chevron-right"></i>
            </a>
        </nav>

        <main class="lesson-content">
            <section class="learning-objectives">
                <h2><i class="fas fa-bullseye"></i> 학습 목표</h2>
                <ul>
                    <li>Cursor의 AI 기반 디버깅 도구 활용하기</li>
                    <li>에러 메시지 분석과 해결 방법 익히기</li>
                    <li>브레이크포인트와 변수 검사 마스터하기</li>
                    <li>성능 문제 진단과 최적화 방법 이해하기</li>
                    <li>효율적인 문제 해결 워크플로우 구축하기</li>
                </ul>
            </section>

            <section class="content-section">
                <h2><i class="fas fa-microscope"></i> AI 디버깅의 새로운 패러다임</h2>
                
                <div class="info-box">
                    <p>Cursor의 AI 디버깅은 단순히 에러를 찾는 것을 넘어, 문제의 근본 원인을 파악하고 최적의 해결책을 제시합니다. 코드의 맥락을 이해하고 비슷한 패턴의 버그를 예방하는 방법까지 안내합니다.</p>
                </div>

                <h3>AI 디버깅의 핵심 기능</h3>
                <div class="debugging-features">
                    <div class="feature-card">
                        <i class="fas fa-search"></i>
                        <h4>자동 에러 감지</h4>
                        <p>코드 작성 중 실시간으로 잠재적 문제 발견</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-lightbulb"></i>
                        <h4>스마트 해결책</h4>
                        <p>에러의 원인과 여러 해결 방법 제시</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-chart-line"></i>
                        <h4>성능 분석</h4>
                        <p>코드 실행 시간과 메모리 사용량 최적화</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-shield-alt"></i>
                        <h4>예방적 디버깅</h4>
                        <p>유사한 버그 패턴 학습 및 예방</p>
                    </div>
                </div>
            </section>

            <section class="content-section">
                <h2><i class="fas fa-exclamation-triangle"></i> 에러 타입별 해결 전략</h2>

                <div class="error-types">
                    <h3>1. 구문 에러 (Syntax Errors)</h3>
                    <div class="error-example">
                        <div class="error-scenario">
                            <div class="code-with-error">
                                <pre><code class="error-highlight">function calculateTotal(items) {
    let total = 0;
    items.forEach(item => {
        total += item.price * item.quantity  // 세미콜론 누락
    )}  // 닫는 괄호 오류
    return total;
}</code></pre>
                                <div class="error-message">
                                    <span class="error-icon">❌</span>
                                    <span>SyntaxError: Unexpected token '}'</span>
                                </div>
                            </div>
                            
                            <div class="ai-solution">
                                <h4>AI 해결책</h4>
                                <div class="solution-steps">
                                    <p>문제점 발견:</p>
                                    <ul>
                                        <li>forEach 문의 닫는 괄호가 잘못됨</li>
                                        <li>세미콜론 누락 (선택사항)</li>
                                    </ul>
                                    <p>수정된 코드:</p>
                                    <pre><code class="fixed">function calculateTotal(items) {
    let total = 0;
    items.forEach(item => {
        total += item.price * item.quantity;
    });  // 수정됨
    return total;
}</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>

                    <h3>2. 런타임 에러 (Runtime Errors)</h3>
                    <div class="error-example">
                        <div class="error-scenario">
                            <div class="code-with-error">
                                <pre><code>function getUserData(userId) {
    const user = users.find(u => u.id === userId);
    return user.name.toUpperCase();  // user가 undefined일 수 있음
}</code></pre>
                                <div class="error-message">
                                    <span class="error-icon">❌</span>
                                    <span>TypeError: Cannot read property 'name' of undefined</span>
                                </div>
                            </div>
                            
                            <div class="ai-solution">
                                <h4>AI 해결책</h4>
                                <div class="solution-options">
                                    <div class="solution-option">
                                        <h5>옵션 1: 옵셔널 체이닝</h5>
                                        <pre><code>function getUserData(userId) {
    const user = users.find(u => u.id === userId);
    return user?.name?.toUpperCase() || 'Unknown User';
}</code></pre>
                                    </div>
                                    <div class="solution-option">
                                        <h5>옵션 2: 명시적 검사</h5>
                                        <pre><code>function getUserData(userId) {
    const user = users.find(u => u.id === userId);
    if (!user) {
        throw new Error(`User with ID ${userId} not found`);
    }
    return user.name.toUpperCase();
}</code></pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <h3>3. 논리적 에러 (Logical Errors)</h3>
                    <div class="error-example">
                        <div class="error-scenario">
                            <div class="code-with-error">
                                <pre><code>function calculateDiscount(price, discountPercent) {
    // 잘못된 할인 계산
    return price - discountPercent;  // 퍼센트를 직접 빼고 있음
}</code></pre>
                                <div class="test-result">
                                    <p>테스트 결과:</p>
                                    <code>calculateDiscount(100, 20) // 80 (예상: 80) ❌</code>
                                    <code>calculateDiscount(50, 10)  // 40 (예상: 45) ❌</code>
                                </div>
                            </div>
                            
                            <div class="ai-solution">
                                <h4>AI 분석</h4>
                                <p>할인 계산 로직이 잘못되었습니다. 퍼센트를 금액으로 변환해야 합니다.</p>
                                <pre><code>function calculateDiscount(price, discountPercent) {
    const discountAmount = price * (discountPercent / 100);
    return price - discountAmount;
    // 또는 한 줄로: return price * (1 - discountPercent / 100);
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="content-section">
                <h2><i class="fas fa-tools"></i> Cursor 디버깅 도구 활용</h2>

                <div class="debugging-tools">
                    <h3>1. 인라인 에러 표시</h3>
                    <div class="inline-errors">
                        <p>코드 작성 중 실시간으로 에러를 감지하고 표시:</p>
                        <div class="inline-error-demo">
                            <div class="code-editor">
                                <div class="line-numbers">
                                    <span>1</span>
                                    <span>2</span>
                                    <span class="error-line">3</span>
                                    <span>4</span>
                                </div>
                                <div class="code-content">
                                    <pre><code>const fetchData = async () => {
    const response = await fetch('/api/data');
    <span class="error-underline">const data = response.json();</span>  // await 누락
    return data;
}</code></pre>
                                </div>
                                <div class="error-tooltip">
                                    <p>⚠️ Promise를 반환합니다. await를 추가하세요.</p>
                                    <button class="quick-fix">Quick Fix</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <h3>2. 브레이크포인트와 디버거</h3>
                    <div class="breakpoint-demo">
                        <h4>디버깅 워크플로우</h4>
                        <div class="debug-steps">
                            <div class="debug-step">
                                <div class="step-icon">🔴</div>
                                <h5>브레이크포인트 설정</h5>
                                <p>의심되는 라인 옆을 클릭하여 브레이크포인트 추가</p>
                            </div>
                            <div class="debug-step">
                                <div class="step-icon">▶️</div>
                                <h5>디버그 모드 실행</h5>
                                <p>F5 또는 Run → Start Debugging</p>
                            </div>
                            <div class="debug-step">
                                <div class="step-icon">🔍</div>
                                <h5>변수 검사</h5>
                                <p>현재 스코프의 모든 변수 값 확인</p>
                            </div>
                            <div class="debug-step">
                                <div class="step-icon">⏭️</div>
                                <h5>단계별 실행</h5>
                                <p>F10(다음 줄), F11(함수 내부로)</p>
                            </div>
                        </div>
                    </div>

                    <h3>3. AI 콘솔 디버깅</h3>
                    <div class="console-debugging">
                        <p>console.log 대신 AI가 스마트한 로깅을 제안:</p>
                        <div class="console-example">
                            <div class="traditional-way">
                                <h5>기존 방식</h5>
                                <pre><code>console.log('user:', user);
console.log('data:', data);
console.log('result:', result);</code></pre>
                            </div>
                            <div class="ai-way">
                                <h5>AI 제안</h5>
                                <pre><code>console.table({ user, data, result });

// 또는 조건부 로깅
if (process.env.NODE_ENV === 'development') {
    console.group('API Response Debug');
    console.log('User ID:', user.id);
    console.log('Data received:', data.length, 'items');
    console.time('Processing');
    // ... 처리 로직
    console.timeEnd('Processing');
    console.groupEnd();
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="content-section">
                <h2><i class="fas fa-tachometer-alt"></i> 성능 문제 디버깅</h2>

                <div class="performance-debugging">
                    <h3>성능 문제 감지와 해결</h3>
                    
                    <div class="perf-example">
                        <h4>시나리오: 느린 리스트 렌더링</h4>
                        <div class="perf-problem">
                            <div class="slow-code">
                                <h5>문제가 있는 코드</h5>
                                <pre><code>function SearchResults({ items, searchTerm }) {
    // 매 렌더링마다 필터링 수행
    const filteredItems = items.filter(item => 
        item.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
        item.description.toLowerCase().includes(searchTerm.toLowerCase())
    );

    // 매 렌더링마다 정렬 수행
    const sortedItems = filteredItems.sort((a, b) => 
        b.relevance - a.relevance
    );

    return (
        <ul>
            {sortedItems.map(item => (
                <li key={item.id}>{item.title}</li>
            ))}
        </ul>
    );
}</code></pre>
                            </div>
                            
                            <div class="ai-optimization">
                                <h5>AI 최적화 제안</h5>
                                <pre><code>import { useMemo } from 'react';

function SearchResults({ items, searchTerm }) {
    // 검색어가 변경될 때만 필터링 재계산
    const filteredItems = useMemo(() => {
        const term = searchTerm.toLowerCase();
        return items.filter(item => 
            item.title.toLowerCase().includes(term) ||
            item.description.toLowerCase().includes(term)
        );
    }, [items, searchTerm]);

    // 필터링된 결과가 변경될 때만 정렬 재계산
    const sortedItems = useMemo(() => 
        [...filteredItems].sort((a, b) => b.relevance - a.relevance),
        [filteredItems]
    );

    return (
        <ul>
            {sortedItems.map(item => (
                <li key={item.id}>{item.title}</li>
            ))}
        </ul>
    );
}</code></pre>
                                <div class="perf-improvement">
                                    <p>성능 개선:</p>
                                    <ul>
                                        <li>불필요한 재계산 방지</li>
                                        <li>메모이제이션으로 렌더링 최적화</li>
                                        <li>원본 배열 변경 방지 (spread 연산자)</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="content-section">
                <h2><i class="fas fa-network-wired"></i> 비동기 코드 디버깅</h2>

                <div class="async-debugging">
                    <h3>Promise와 Async/Await 문제 해결</h3>
                    
                    <div class="async-example">
                        <h4>흔한 비동기 에러들</h4>
                        
                        <div class="async-error">
                            <h5>1. Unhandled Promise Rejection</h5>
                            <pre><code class="problematic">async function fetchUserData(userId) {
    const response = await fetch(`/api/users/${userId}`);
    const data = await response.json();  // 에러 처리 없음
    return data;
}</code></pre>
                            
                            <div class="ai-fix">
                                <p>AI 수정 제안:</p>
                                <pre><code>async function fetchUserData(userId) {
    try {
        const response = await fetch(`/api/users/${userId}`);
        
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const data = await response.json();
        return data;
    } catch (error) {
        console.error('Failed to fetch user data:', error);
        
        // 에러를 상위로 전파하거나 기본값 반환
        throw new Error(`Unable to fetch user ${userId}: ${error.message}`);
    }
}</code></pre>
                            </div>
                        </div>

                        <div class="async-error">
                            <h5>2. Race Condition</h5>
                            <pre><code class="problematic">let latestQuery = '';

async function search(query) {
    latestQuery = query;
    const results = await api.search(query);
    
    // 문제: 이전 요청이 늦게 도착할 수 있음
    setSearchResults(results);
}</code></pre>
                            
                            <div class="ai-fix">
                                <p>AI 수정 제안:</p>
                                <pre><code>let abortController = null;

async function search(query) {
    // 이전 요청 취소
    if (abortController) {
        abortController.abort();
    }
    
    abortController = new AbortController();
    
    try {
        const results = await api.search(query, {
            signal: abortController.signal
        });
        
        setSearchResults(results);
    } catch (error) {
        if (error.name !== 'AbortError') {
            console.error('Search failed:', error);
        }
    }
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="practice">
                <h2><i class="fas fa-laptop-code"></i> 실습: 버그가 있는 Todo 앱 디버깅</h2>

                <div class="practice-content">
                    <h3>실제 버그들을 찾아 수정해보기</h3>
                    <p>다음 Todo 앱 코드에는 여러 버그가 숨어있습니다. AI와 함께 찾아서 수정해보세요.</p>

                    <div class="buggy-code">
                        <h4>버그가 있는 코드</h4>
                        <pre><code>import React, { useState, useEffect } from 'react';

function TodoApp() {
    const [todos, setTodos] = useState([]);
    const [inputValue, setInputValue] = useState('');
    const [filter, setFilter] = useState('all');

    // 버그 1: localStorage 에러 처리 없음
    useEffect(() => {
        const saved = localStorage.getItem('todos');
        setTodos(JSON.parse(saved));
    }, []);

    // 버그 2: 무한 루프
    useEffect(() => {
        localStorage.setItem('todos', JSON.stringify(todos));
    });

    const addTodo = () => {
        // 버그 3: 빈 문자열 체크 없음
        const newTodo = {
            id: Date.now(),
            text: inputValue,
            completed: false
        };
        // 버그 4: 직접 배열 수정
        todos.push(newTodo);
        setTodos(todos);
        setInputValue('');
    };

    const toggleTodo = (id) => {
        // 버그 5: 잘못된 비교 연산자
        const todo = todos.find(t => t.id = id);
        todo.completed = !todo.completed;
        setTodos(todos);
    };

    const deleteTodo = (id) => {
        // 버그 6: filter 결과를 저장하지 않음
        todos.filter(todo => todo.id !== id);
    };

    // 버그 7: 필터링 로직 오류
    const filteredTodos = todos.filter(todo => {
        if (filter === 'completed') return todo.completed;
        if (filter === 'active') return todo.completed;
        return true;
    });

    return (
        <div className="todo-app">
            <h1>Todo List</h1>
            
            <div className="add-todo">
                <input
                    value={inputValue}
                    onChange={(e) => setInputValue(e.target.value)}
                    // 버그 8: Enter 키 처리 없음
                />
                <button onClick={addTodo}>Add</button>
            </div>

            <div className="filters">
                <button onClick={() => setFilter('all')}>All</button>
                <button onClick={() => setFilter('active')}>Active</button>
                <button onClick={() => setFilter('completed')}>Completed</button>
            </div>

            <ul className="todo-list">
                {filteredTodos.map(todo => (
                    // 버그 9: key prop 없음
                    <li>
                        <input
                            type="checkbox"
                            checked={todo.completed}
                            onChange={() => toggleTodo(todo.id)}
                        />
                        <span>{todo.text}</span>
                        <button onClick={() => deleteTodo(todo.id)}>Delete</button>
                    </li>
                ))}
            </ul>
        </div>
    );
}</code></pre>
                    </div>

                    <div class="debugging-steps">
                        <h4>디버깅 단계</h4>
                        <ol>
                            <li>코드를 Cursor에 복사하여 에러 표시 확인</li>
                            <li>각 버그에 대해 AI Chat에 질문</li>
                            <li>Cmd+K로 각 버그를 수정</li>
                            <li>브라우저 개발자 도구로 런타임 에러 확인</li>
                            <li>모든 기능이 정상 작동하는지 테스트</li>
                        </ol>
                    </div>

                    <div class="bug-list">
                        <h4>찾아야 할 버그들</h4>
                        <ul>
                            <li>localStorage 파싱 에러</li>
                            <li>useEffect 무한 루프</li>
                            <li>상태 불변성 위반</li>
                            <li>잘못된 연산자 사용</li>
                            <li>필터링 로직 오류</li>
                            <li>미반영되는 상태 업데이트</li>
                            <li>missing key prop 경고</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section class="best-practices">
                <h2><i class="fas fa-medal"></i> 디버깅 베스트 프랙티스</h2>

                <div class="debugging-tips">
                    <div class="tip-category">
                        <h3>예방적 디버깅</h3>
                        <ul>
                            <li>TypeScript 사용으로 타입 에러 사전 방지</li>
                            <li>ESLint 규칙으로 일반적인 실수 감지</li>
                            <li>단위 테스트로 로직 검증</li>
                            <li>코드 리뷰 전 AI로 사전 검토</li>
                        </ul>
                    </div>

                    <div class="tip-category">
                        <h3>효율적인 디버깅</h3>
                        <ul>
                            <li>에러 메시지를 정확히 읽고 이해하기</li>
                            <li>문제를 재현 가능한 최소 코드로 격리</li>
                            <li>이진 탐색으로 문제 범위 좁히기</li>
                            <li>AI에게 구체적인 컨텍스트 제공</li>
                        </ul>
                    </div>

                    <div class="tip-category">
                        <h3>디버깅 후 조치</h3>
                        <ul>
                            <li>동일한 버그 재발 방지책 마련</li>
                            <li>테스트 케이스 추가</li>
                            <li>문서화 및 주석 업데이트</li>
                            <li>팀과 해결 방법 공유</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section class="summary">
                <h2><i class="fas fa-check-circle"></i> 핵심 정리</h2>
                
                <div class="key-points">
                    <div class="point">
                        <i class="fas fa-star"></i>
                        <h3>AI가 문제를 먼저 발견</h3>
                        <p>코드 작성 중 실시간으로 잠재적 문제를 감지하고 경고합니다.</p>
                    </div>
                    
                    <div class="point">
                        <i class="fas fa-star"></i>
                        <h3>맥락 기반 해결책</h3>
                        <p>프로젝트 전체 컨텍스트를 고려한 최적의 해결 방법을 제시합니다.</p>
                    </div>
                    
                    <div class="point">
                        <i class="fas fa-star"></i>
                        <h3>학습하는 디버깅</h3>
                        <p>비슷한 패턴의 버그를 인식하고 예방하는 방법을 학습합니다.</p>
                    </div>
                    
                    <div class="point">
                        <i class="fas fa-star"></i>
                        <h3>통합된 도구</h3>
                        <p>브레이크포인트, 콘솔, 성능 분석이 AI와 완벽하게 통합되어 있습니다.</p>
                    </div>
                </div>

                <div class="next-steps">
                    <h3>다음 강의 예고</h3>
                    <p>다음 강의에서는 기초편의 마지막으로 단축키와 설정을 최적화하여 생산성을 극대화하는 방법을 배웁니다.</p>
                    <a href="lesson10.html" class="btn btn-primary">
                        <i class="fas fa-arrow-right"></i> 다음 강의로 이동
                    </a>
                </div>
            </section>
        </main>

        <aside class="sidebar">
            <div class="sidebar-section">
                <h3><i class="fas fa-list"></i> 강의 목차</h3>
                <ol class="lesson-list">
                    <li>Cursor 소개와 설치</li>
                    <li>첫 번째 AI 자동완성</li>
                    <li>AI Chat 마스터하기</li>
                    <li>Cmd+K 완벽 가이드</li>
                    <li>프로젝트 컨텍스트</li>
                    <li>AI 모델 선택과 활용</li>
                    <li>Composer 기능 활용</li>
                    <li>터미널 통합</li>
                    <li class="current">디버깅과 에러 해결</li>
                </ol>
            </div>

            <div class="sidebar-section">
                <h3><i class="fas fa-bug"></i> 디버깅 체크리스트</h3>
                <div class="debug-checklist">
                    <label><input type="checkbox"> 에러 메시지 확인</label>
                    <label><input type="checkbox"> 변수 값 검사</label>
                    <label><input type="checkbox"> 함수 호출 순서</label>
                    <label><input type="checkbox"> 비동기 처리</label>
                    <label><input type="checkbox"> 타입 확인</label>
                    <label><input type="checkbox"> 경계 조건</label>
                </div>
            </div>

            <div class="sidebar-section">
                <h3><i class="fas fa-lightbulb"></i> 프로 팁</h3>
                <div class="tip-box">
                    <p>💡 디버깅할 때는 가정하지 말고 확인하세요. console.log 대신 디버거를 사용하면 더 많은 정보를 얻을 수 있습니다.</p>
                </div>
            </div>
        </aside>

        <div class="progress-tracker">
            <div class="progress-bar" style="width: 30%"></div>
            <span class="progress-text">9/30 완료</span>
        </div>
    </div>

    <script src="../assets/lesson-script.js"></script>
    <script>
        // Error highlighting animation
        const errorElements = document.querySelectorAll('.error-underline');
        errorElements.forEach(el => {
            el.addEventListener('mouseenter', () => {
                const tooltip = el.nextElementSibling;
                if (tooltip) {
                    tooltip.style.opacity = '1';
                    tooltip.style.transform = 'translateY(0)';
                }
            });
        });

        // Interactive debugging demo
        const debugSteps = document.querySelectorAll('.debug-step');
        debugSteps.forEach((step, index) => {
            step.style.opacity = '0';
            step.style.transform = 'translateX(-20px)';
            setTimeout(() => {
                step.style.transition = 'all 0.5s ease';
                step.style.opacity = '1';
                step.style.transform = 'translateX(0)';
            }, index * 200);
        });
    </script>
</body>
</html>