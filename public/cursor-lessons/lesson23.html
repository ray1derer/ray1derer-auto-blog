<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì œ23ê°•: AI ì½”ë“œ ë¦¬ë·°ì™€ í’ˆì§ˆ ê´€ë¦¬ | Cursor AI ë§ˆìŠ¤í„° í´ë˜ìŠ¤</title>
    <link rel="stylesheet" href="../assets/lesson-style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="lesson-container">
        <header class="lesson-header">
            <div class="lesson-title">
                <h1><i class="fas fa-search-plus"></i> ì œ23ê°•: AI ì½”ë“œ ë¦¬ë·°ì™€ í’ˆì§ˆ ê´€ë¦¬</h1>
                <p class="lesson-subtitle">AIë¥¼ í™œìš©í•œ ìë™í™”ëœ ì½”ë“œ í’ˆì§ˆ ê²€ì¦ê³¼ ê°œì„ </p>
            </div>
            <div class="lesson-meta">
                <span class="difficulty"><i class="fas fa-signal"></i> ë‚œì´ë„: ê³ ê¸‰</span>
                <span class="duration"><i class="fas fa-clock"></i> ì˜ˆìƒ ì‹œê°„: 65ë¶„</span>
                <span class="category"><i class="fas fa-folder"></i> ì¹´í…Œê³ ë¦¬: ê³ ê¸‰</span>
            </div>
        </header>

        <nav class="lesson-nav">
            <a href="lesson22.html" class="nav-link prev">
                <i class="fas fa-chevron-left"></i> ì´ì „ ê°•ì˜
            </a>
            <span class="nav-title">ì œ23ê°•: AI ì½”ë“œ ë¦¬ë·°ì™€ í’ˆì§ˆ ê´€ë¦¬</span>
            <a href="lesson24.html" class="nav-link next">
                ë‹¤ìŒ ê°•ì˜ <i class="fas fa-chevron-right"></i>
            </a>
        </nav>

        <main class="lesson-content">
            <section class="learning-objectives">
                <h2><i class="fas fa-bullseye"></i> í•™ìŠµ ëª©í‘œ</h2>
                <ul>
                    <li>AI ê¸°ë°˜ ìë™ ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ êµ¬ì¶•í•˜ê¸°</li>
                    <li>ì½”ë“œ í’ˆì§ˆ ë©”íŠ¸ë¦­ìŠ¤ ë¶„ì„ê³¼ ê°œì„  ì „ëµ</li>
                    <li>ë³´ì•ˆ ì·¨ì•½ì  ìë™ íƒì§€ì™€ ìˆ˜ì •</li>
                    <li>ë¦¬íŒ©í† ë§ ì œì•ˆê³¼ ìë™í™”</li>
                    <li>íŒ€ ì½”ë“œ ìŠ¤íƒ€ì¼ ì¼ê´€ì„± ìœ ì§€í•˜ê¸°</li>
                </ul>
            </section>

            <section class="content-section">
                <h2><i class="fas fa-robot"></i> AI ìë™ ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ</h2>
                
                <div class="info-box">
                    <p>Cursor AIëŠ” ì»¤ë°‹ ì „ ìë™ìœ¼ë¡œ ì½”ë“œë¥¼ ë¶„ì„í•˜ì—¬ ì ì¬ì  ë¬¸ì œë¥¼ ì°¾ì•„ë‚´ê³ , ê°œì„  ì‚¬í•­ì„ ì œì•ˆí•©ë‹ˆë‹¤. ì´ëŠ” ì½”ë“œ í’ˆì§ˆì„ ì¼ê´€ë˜ê²Œ ìœ ì§€í•˜ê³  ë²„ê·¸ë¥¼ ì¡°ê¸°ì— ë°œê²¬í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.</p>
                </div>

                <h3>ìë™ ì½”ë“œ ë¦¬ë·° ë´‡ êµ¬í˜„</h3>
                <div class="code-review-bot">
                    <div class="bot-implementation">
                        <h4>ì½”ë“œ ë¦¬ë·° ìë™í™” ì‹œìŠ¤í…œ</h4>
                        <pre><code>// .cursor/code-review-bot.js
import { CursorAI } from '@cursor/api';
import { GitHubAPI } from '@octokit/rest';
import { ESLint } from 'eslint';
import { parse } from '@babel/parser';
import traverse from '@babel/traverse';

class AICodeReviewBot {
    constructor(config) {
        this.cursor = new CursorAI(config.cursorApiKey);
        this.github = new GitHubAPI({ auth: config.githubToken });
        this.eslint = new ESLint({
            baseConfig: config.eslintConfig,
            useEslintrc: true
        });
        
        this.reviewRules = {
            complexity: {
                maxCyclomaticComplexity: 10,
                maxCognitiveComplexity: 15,
                maxLinesPerFunction: 50,
                maxParameters: 4
            },
            security: {
                checkSQLInjection: true,
                checkXSS: true,
                checkSensitiveData: true,
                checkDependencies: true
            },
            performance: {
                checkN1Queries: true,
                checkMemoryLeaks: true,
                checkAsyncPatterns: true,
                checkBundleSize: true
            },
            maintainability: {
                checkDuplication: true,
                checkNaming: true,
                checkDocumentation: true,
                checkTestCoverage: true
            }
        };
    }

    async reviewPullRequest(owner, repo, pullNumber) {
        const pr = await this.github.pulls.get({
            owner,
            repo,
            pull_number: pullNumber
        });

        const files = await this.github.pulls.listFiles({
            owner,
            repo,
            pull_number: pullNumber
        });

        const reviews = [];
        
        for (const file of files.data) {
            if (this.shouldReviewFile(file.filename)) {
                const review = await this.reviewFile(file);
                if (review.issues.length > 0) {
                    reviews.push(review);
                }
            }
        }

        return this.generateReviewReport(reviews);
    }

    async reviewFile(file) {
        const content = await this.getFileContent(file);
        
        const reviews = {
            filename: file.filename,
            issues: [],
            suggestions: [],
            metrics: {}
        };

        // 1. ESLint ê²€ì‚¬
        const lintResults = await this.runESLint(content, file.filename);
        reviews.issues.push(...this.formatLintIssues(lintResults));

        // 2. ë³µì¡ë„ ë¶„ì„
        const complexityIssues = await this.analyzeComplexity(content);
        reviews.issues.push(...complexityIssues);
        
        // 3. ë³´ì•ˆ ì·¨ì•½ì  ê²€ì‚¬
        const securityIssues = await this.checkSecurity(content);
        reviews.issues.push(...securityIssues);
        
        // 4. AI ê¸°ë°˜ ì½”ë“œ ë¶„ì„
        const aiReview = await this.getAIReview(content, file.filename);
        reviews.suggestions.push(...aiReview.suggestions);
        
        // 5. ì„±ëŠ¥ ë¶„ì„
        const performanceIssues = await this.analyzePerformance(content);
        reviews.issues.push(...performanceIssues);

        // 6. ì½”ë“œ ë©”íŠ¸ë¦­ìŠ¤ ìˆ˜ì§‘
        reviews.metrics = await this.collectMetrics(content);

        return reviews;
    }

    async analyzeComplexity(code) {
        const issues = [];
        const ast = parse(code, {
            sourceType: 'module',
            plugins: ['jsx', 'typescript']
        });

        traverse(ast, {
            FunctionDeclaration: (path) => {
                const complexity = this.calculateCyclomaticComplexity(path.node);
                if (complexity > this.reviewRules.complexity.maxCyclomaticComplexity) {
                    issues.push({
                        line: path.node.loc.start.line,
                        severity: 'warning',
                        message: `í•¨ìˆ˜ '${path.node.id.name}'ì˜ ìˆœí™˜ ë³µì¡ë„ê°€ ${complexity}ì…ë‹ˆë‹¤. (ìµœëŒ€: ${this.reviewRules.complexity.maxCyclomaticComplexity})`,
                        suggestion: 'í•¨ìˆ˜ë¥¼ ë” ì‘ì€ ë‹¨ìœ„ë¡œ ë¶„ë¦¬í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ë³´ì„¸ìš”.'
                    });
                }
            },
            ArrowFunctionExpression: (path) => {
                const lineCount = path.node.loc.end.line - path.node.loc.start.line;
                if (lineCount > this.reviewRules.complexity.maxLinesPerFunction) {
                    issues.push({
                        line: path.node.loc.start.line,
                        severity: 'warning',
                        message: `í•¨ìˆ˜ê°€ ë„ˆë¬´ ê¹ë‹ˆë‹¤ (${lineCount}ì¤„). ìµœëŒ€ ${this.reviewRules.complexity.maxLinesPerFunction}ì¤„ì„ ê¶Œì¥í•©ë‹ˆë‹¤.`,
                        suggestion: 'í•¨ìˆ˜ë¥¼ ë” ì‘ì€ ë‹¨ìœ„ë¡œ ë¶„ë¦¬í•˜ì„¸ìš”.'
                    });
                }
            }
        });

        return issues;
    }

    async checkSecurity(code) {
        const issues = [];
        
        // SQL Injection ê²€ì‚¬
        const sqlPatterns = [
            /query\s*\(\s*['"`].*\$\{.*\}.*['"`]\s*\)/gi,
            /execute\s*\(\s*['"`].*\+.*['"`]\s*\)/gi
        ];
        
        sqlPatterns.forEach(pattern => {
            const matches = code.matchAll(pattern);
            for (const match of matches) {
                const line = code.substring(0, match.index).split('\n').length;
                issues.push({
                    line,
                    severity: 'error',
                    message: 'SQL Injection ì·¨ì•½ì ì´ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤.',
                    suggestion: 'Prepared statementsë‚˜ íŒŒë¼ë¯¸í„°í™”ëœ ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.'
                });
            }
        });

        // XSS ê²€ì‚¬
        const xssPatterns = [
            /innerHTML\s*=\s*[^'"`]*\$/gi,
            /dangerouslySetInnerHTML/gi
        ];
        
        xssPatterns.forEach(pattern => {
            const matches = code.matchAll(pattern);
            for (const match of matches) {
                const line = code.substring(0, match.index).split('\n').length;
                issues.push({
                    line,
                    severity: 'warning',
                    message: 'XSS ì·¨ì•½ì  ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤.',
                    suggestion: 'textContentë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ ì…ë ¥ê°’ì„ ì ì ˆíˆ ì´ìŠ¤ì¼€ì´í”„í•˜ì„¸ìš”.'
                });
            }
        });

        // ë¯¼ê°í•œ ì •ë³´ ë…¸ì¶œ ê²€ì‚¬
        const sensitivePatterns = [
            /api[_-]?key\s*[:=]\s*['"`][^'"`]+['"`]/gi,
            /password\s*[:=]\s*['"`][^'"`]+['"`]/gi,
            /secret\s*[:=]\s*['"`][^'"`]+['"`]/gi
        ];
        
        sensitivePatterns.forEach(pattern => {
            const matches = code.matchAll(pattern);
            for (const match of matches) {
                const line = code.substring(0, match.index).split('\n').length;
                issues.push({
                    line,
                    severity: 'error',
                    message: 'í•˜ë“œì½”ë”©ëœ ë¯¼ê°í•œ ì •ë³´ê°€ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤.',
                    suggestion: 'í™˜ê²½ ë³€ìˆ˜ë‚˜ ë³´ì•ˆ ì €ì¥ì†Œë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.'
                });
            }
        });

        return issues;
    }

    async getAIReview(code, filename) {
        const prompt = `
ë‹¤ìŒ ì½”ë“œë¥¼ ë¦¬ë·°í•˜ê³  ê°œì„  ì‚¬í•­ì„ ì œì•ˆí•´ì£¼ì„¸ìš”:

íŒŒì¼ëª…: ${filename}
ì½”ë“œ:
\`\`\`
${code}
\`\`\`

ë‹¤ìŒ ì¸¡ë©´ì„ ì¤‘ì ì ìœ¼ë¡œ ê²€í† í•´ì£¼ì„¸ìš”:
1. ì½”ë“œ í’ˆì§ˆê³¼ ê°€ë…ì„±
2. ì„±ëŠ¥ ìµœì í™” ê°€ëŠ¥ì„±
3. ì ì¬ì  ë²„ê·¸ë‚˜ ì—£ì§€ ì¼€ì´ìŠ¤
4. ë” ë‚˜ì€ íŒ¨í„´ì´ë‚˜ ê´€ìš©êµ¬ ì‚¬ìš©
5. í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±

ê° ì œì•ˆì‚¬í•­ì— ëŒ€í•´ êµ¬ì²´ì ì¸ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•´ì£¼ì„¸ìš”.
`;

        const response = await this.cursor.chat.sendMessage(prompt);
        return this.parseAIResponse(response);
    }

    async analyzePerformance(code) {
        const issues = [];
        
        // N+1 ì¿¼ë¦¬ íŒ¨í„´ ê²€ì‚¬
        const n1Patterns = [
            /\.map\s*\(.*await.*\)/gi,
            /for\s*\(.*\)\s*{[^}]*await[^}]*}/gi
        ];
        
        n1Patterns.forEach(pattern => {
            const matches = code.matchAll(pattern);
            for (const match of matches) {
                const line = code.substring(0, match.index).split('\n').length;
                issues.push({
                    line,
                    severity: 'warning',
                    message: 'N+1 ì¿¼ë¦¬ íŒ¨í„´ì´ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.',
                    suggestion: 'Promise.all()ì„ ì‚¬ìš©í•˜ê±°ë‚˜ ì¿¼ë¦¬ë¥¼ ë°°ì¹˜ë¡œ ì²˜ë¦¬í•˜ì„¸ìš”.'
                });
            }
        });

        // ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ê°€ëŠ¥ì„± ê²€ì‚¬
        const memoryLeakPatterns = [
            /addEventListener[^}]*(?!removeEventListener)/gi,
            /setInterval\s*\([^)]*\)/gi
        ];
        
        memoryLeakPatterns.forEach(pattern => {
            const matches = code.matchAll(pattern);
            for (const match of matches) {
                const line = code.substring(0, match.index).split('\n').length;
                issues.push({
                    line,
                    severity: 'warning',
                    message: 'ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤.',
                    suggestion: 'ì ì ˆí•œ cleanup ë¡œì§ì„ ì¶”ê°€í•˜ì„¸ìš”.'
                });
            }
        });

        return issues;
    }

    async collectMetrics(code) {
        const lines = code.split('\n');
        const ast = parse(code, {
            sourceType: 'module',
            plugins: ['jsx', 'typescript']
        });

        let functionCount = 0;
        let classCount = 0;
        let maxDepth = 0;
        let currentDepth = 0;

        traverse(ast, {
            enter(path) {
                currentDepth++;
                maxDepth = Math.max(maxDepth, currentDepth);
            },
            exit() {
                currentDepth--;
            },
            FunctionDeclaration() {
                functionCount++;
            },
            ArrowFunctionExpression() {
                functionCount++;
            },
            ClassDeclaration() {
                classCount++;
            }
        });

        return {
            lines: lines.length,
            functions: functionCount,
            classes: classCount,
            maxDepth,
            commentRatio: this.calculateCommentRatio(code),
            duplicateLines: this.findDuplicateLines(lines)
        };
    }

    calculateCommentRatio(code) {
        const commentLines = (code.match(/\/\/.*$/gm) || []).length +
                           (code.match(/\/\*[\s\S]*?\*\//g) || [])
                               .reduce((sum, comment) => sum + comment.split('\n').length, 0);
        const totalLines = code.split('\n').length;
        return (commentLines / totalLines * 100).toFixed(2);
    }

    findDuplicateLines(lines) {
        const lineMap = new Map();
        let duplicates = 0;
        
        lines.forEach((line, index) => {
            const trimmed = line.trim();
            if (trimmed && trimmed.length > 10) {
                if (lineMap.has(trimmed)) {
                    duplicates++;
                } else {
                    lineMap.set(trimmed, index);
                }
            }
        });
        
        return duplicates;
    }

    async generateReviewReport(reviews) {
        const totalIssues = reviews.reduce((sum, r) => sum + r.issues.length, 0);
        const criticalIssues = reviews.reduce((sum, r) => 
            sum + r.issues.filter(i => i.severity === 'error').length, 0);
        
        const report = {
            summary: {
                totalFiles: reviews.length,
                totalIssues,
                criticalIssues,
                warnings: totalIssues - criticalIssues,
                overallScore: this.calculateOverallScore(reviews)
            },
            fileReviews: reviews,
            recommendations: await this.generateRecommendations(reviews)
        };

        return report;
    }

    calculateOverallScore(reviews) {
        let score = 100;
        
        reviews.forEach(review => {
            review.issues.forEach(issue => {
                if (issue.severity === 'error') {
                    score -= 10;
                } else if (issue.severity === 'warning') {
                    score -= 5;
                }
            });
        });
        
        return Math.max(0, score);
    }

    async generateRecommendations(reviews) {
        const recommendations = [];
        
        // ë³µì¡ë„ê°€ ë†’ì€ íŒŒì¼ë“¤
        const complexFiles = reviews.filter(r => 
            r.metrics && r.metrics.maxDepth > 5
        );
        
        if (complexFiles.length > 0) {
            recommendations.push({
                type: 'refactoring',
                priority: 'high',
                message: `${complexFiles.length}ê°œ íŒŒì¼ì˜ ë³µì¡ë„ê°€ ë†’ìŠµë‹ˆë‹¤. ë¦¬íŒ©í† ë§ì„ ê³ ë ¤í•˜ì„¸ìš”.`,
                files: complexFiles.map(f => f.filename)
            });
        }
        
        // í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ê°€ ë‚®ì€ íŒŒì¼ë“¤
        const lowCoverageFiles = reviews.filter(r => 
            r.metrics && r.metrics.testCoverage < 80
        );
        
        if (lowCoverageFiles.length > 0) {
            recommendations.push({
                type: 'testing',
                priority: 'medium',
                message: `${lowCoverageFiles.length}ê°œ íŒŒì¼ì˜ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ê°€ ë‚®ìŠµë‹ˆë‹¤.`,
                files: lowCoverageFiles.map(f => f.filename)
            });
        }
        
        return recommendations;
    }
}

// GitHub Actions í†µí•©
export async function runCodeReview() {
    const bot = new AICodeReviewBot({
        cursorApiKey: process.env.CURSOR_API_KEY,
        githubToken: process.env.GITHUB_TOKEN,
        eslintConfig: require('./.eslintrc.js')
    });

    const pullNumber = process.env.GITHUB_PR_NUMBER;
    const [owner, repo] = process.env.GITHUB_REPOSITORY.split('/');
    
    const report = await bot.reviewPullRequest(owner, repo, pullNumber);
    
    // GitHub PRì— ì½”ë©˜íŠ¸ ì‘ì„±
    await bot.github.issues.createComment({
        owner,
        repo,
        issue_number: pullNumber,
        body: formatReviewComment(report)
    });
    
    // ì‹¬ê°í•œ ì´ìŠˆê°€ ìˆìœ¼ë©´ PR ë¸”ë¡
    if (report.summary.criticalIssues > 0) {
        process.exit(1);
    }
}

function formatReviewComment(report) {
    return `## ğŸ¤– AI ì½”ë“œ ë¦¬ë·° ê²°ê³¼

### ğŸ“Š ìš”ì•½
- ê²€í† í•œ íŒŒì¼: ${report.summary.totalFiles}ê°œ
- ë°œê²¬ëœ ì´ìŠˆ: ${report.summary.totalIssues}ê°œ
- ì‹¬ê°í•œ ì´ìŠˆ: ${report.summary.criticalIssues}ê°œ
- ê²½ê³ : ${report.summary.warnings}ê°œ
- ì „ì²´ ì ìˆ˜: ${report.summary.overallScore}/100

### ğŸ“‹ ìƒì„¸ ë¦¬ë·°
${report.fileReviews.map(formatFileReview).join('\n\n')}

### ğŸ’¡ ê¶Œì¥ì‚¬í•­
${report.recommendations.map(formatRecommendation).join('\n')}
`;
}
</code></pre>
                    </div>
                </div>

                <h3>ì½”ë“œ í’ˆì§ˆ ë©”íŠ¸ë¦­ìŠ¤ ëŒ€ì‹œë³´ë“œ</h3>
                <div class="metrics-dashboard">
                    <div class="dashboard-implementation">
                        <h4>ì‹¤ì‹œê°„ ì½”ë“œ í’ˆì§ˆ ëª¨ë‹ˆí„°ë§</h4>
                        <pre><code>// components/CodeQualityDashboard.tsx
import React, { useState, useEffect } from 'react';
import { Line, Bar, Radar } from 'react-chartjs-2';
import { CursorAI } from '@cursor/api';

interface CodeMetrics {
    complexity: number;
    maintainability: number;
    testCoverage: number;
    duplicateCode: number;
    technicalDebt: number;
    securityScore: number;
}

export function CodeQualityDashboard() {
    const [metrics, setMetrics] = useState<CodeMetrics | null>(null);
    const [trend, setTrend] = useState<any[]>([]);
    const [fileAnalysis, setFileAnalysis] = useState<any[]>([]);
    
    useEffect(() => {
        loadMetrics();
        const interval = setInterval(loadMetrics, 60000); // 1ë¶„ë§ˆë‹¤ ì—…ë°ì´íŠ¸
        return () => clearInterval(interval);
    }, []);

    const loadMetrics = async () => {
        const cursor = new CursorAI();
        
        // í”„ë¡œì íŠ¸ ì „ì²´ ë¶„ì„
        const analysis = await cursor.ai.analyzeProject({
            includeMetrics: true,
            includeSecurity: true,
            includePerformance: true
        });
        
        setMetrics(analysis.metrics);
        setTrend(analysis.trend);
        setFileAnalysis(analysis.fileAnalysis);
    };

    const radarData = {
        labels: [
            'ë³µì¡ë„',
            'ìœ ì§€ë³´ìˆ˜ì„±',
            'í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€',
            'ì½”ë“œ ì¤‘ë³µ',
            'ê¸°ìˆ  ë¶€ì±„',
            'ë³´ì•ˆ'
        ],
        datasets: [{
            label: 'í˜„ì¬ í”„ë¡œì íŠ¸',
            data: metrics ? [
                100 - metrics.complexity,
                metrics.maintainability,
                metrics.testCoverage,
                100 - metrics.duplicateCode,
                100 - metrics.technicalDebt,
                metrics.securityScore
            ] : [],
            backgroundColor: 'rgba(59, 130, 246, 0.2)',
            borderColor: 'rgb(59, 130, 246)',
            pointBackgroundColor: 'rgb(59, 130, 246)',
            pointBorderColor: '#fff',
            pointHoverBackgroundColor: '#fff',
            pointHoverBorderColor: 'rgb(59, 130, 246)'
        }]
    };

    return (
        <div className="quality-dashboard">
            <h2>ì½”ë“œ í’ˆì§ˆ ëŒ€ì‹œë³´ë“œ</h2>
            
            <div className="metrics-overview">
                <div className="metric-card">
                    <h3>ì „ì²´ í’ˆì§ˆ ì ìˆ˜</h3>
                    <div className="score-display">
                        <span className="score">{metrics?.overallScore || 0}</span>
                        <span className="score-label">/100</span>
                    </div>
                </div>
                
                <div className="metric-card">
                    <h3>í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€</h3>
                    <div className="coverage-bar">
                        <div 
                            className="coverage-fill"
                            style={{ width: `${metrics?.testCoverage || 0}%` }}
                        />
                    </div>
                    <span>{metrics?.testCoverage || 0}%</span>
                </div>
                
                <div className="metric-card">
                    <h3>ë³´ì•ˆ ì ìˆ˜</h3>
                    <div className="security-indicator">
                        <span className={`security-level ${getSecurityLevel(metrics?.securityScore)}`}>
                            {getSecurityLevel(metrics?.securityScore)}
                        </span>
                    </div>
                </div>
            </div>

            <div className="charts-container">
                <div className="chart-section">
                    <h3>ì½”ë“œ í’ˆì§ˆ ë ˆì´ë” ì°¨íŠ¸</h3>
                    <Radar data={radarData} />
                </div>
                
                <div className="chart-section">
                    <h3>í’ˆì§ˆ ì¶”ì„¸</h3>
                    <Line data={trendData} />
                </div>
            </div>

            <div className="file-analysis">
                <h3>íŒŒì¼ë³„ ë¶„ì„</h3>
                <table className="analysis-table">
                    <thead>
                        <tr>
                            <th>íŒŒì¼</th>
                            <th>ë³µì¡ë„</th>
                            <th>ìœ ì§€ë³´ìˆ˜ì„±</th>
                            <th>ì´ìŠˆ</th>
                            <th>ì•¡ì…˜</th>
                        </tr>
                    </thead>
                    <tbody>
                        {fileAnalysis.map((file, index) => (
                            <tr key={index} className={file.issues > 5 ? 'high-risk' : ''}>
                                <td>{file.path}</td>
                                <td>
                                    <span className={`complexity ${getComplexityClass(file.complexity)}`}>
                                        {file.complexity}
                                    </span>
                                </td>
                                <td>{file.maintainability}</td>
                                <td>{file.issues}</td>
                                <td>
                                    <button onClick={() => reviewFile(file.path)}>
                                        ë¦¬ë·°
                                    </button>
                                    <button onClick={() => refactorFile(file.path)}>
                                        ë¦¬íŒ©í† ë§
                                    </button>
                                </td>
                            </tr>
                        ))}
                    </tbody>
                </table>
            </div>

            <div className="ai-suggestions">
                <h3>AI ê°œì„  ì œì•ˆ</h3>
                <div className="suggestions-list">
                    {suggestions.map((suggestion, index) => (
                        <div key={index} className="suggestion-card">
                            <h4>{suggestion.title}</h4>
                            <p>{suggestion.description}</p>
                            <pre><code>{suggestion.example}</code></pre>
                            <button onClick={() => applySuggestion(suggestion)}>
                                ì ìš©í•˜ê¸°
                            </button>
                        </div>
                    ))}
                </div>
            </div>
        </div>
    );
}
</code></pre>
                    </div>
                </div>
            </section>

            <section class="content-section">
                <h2><i class="fas fa-shield-alt"></i> ë³´ì•ˆ ì·¨ì•½ì  ìë™ íƒì§€</h2>
                
                <h3>AI ê¸°ë°˜ ë³´ì•ˆ ìŠ¤ìºë„ˆ</h3>
                <div class="security-scanner">
                    <div class="scanner-implementation">
                        <h4>ì‹¤ì‹œê°„ ë³´ì•ˆ ì·¨ì•½ì  íƒì§€ ì‹œìŠ¤í…œ</h4>
                        <pre><code>// security/AISecurityScanner.ts
import { CursorAI } from '@cursor/api';
import { DependencyCheck } from 'dependency-check';
import { Snyk } from '@snyk/sdk';
import * as semver from 'semver';

export class AISecurityScanner {
    private cursor: CursorAI;
    private snyk: Snyk;
    private vulnerabilityDB: Map<string, Vulnerability[]>;

    constructor() {
        this.cursor = new CursorAI();
        this.snyk = new Snyk({ token: process.env.SNYK_TOKEN });
        this.vulnerabilityDB = new Map();
        this.loadVulnerabilityDatabase();
    }

    async scanProject(projectPath: string): Promise<SecurityReport> {
        const report: SecurityReport = {
            vulnerabilities: [],
            dependencies: [],
            codeIssues: [],
            recommendations: [],
            overallRisk: 'low'
        };

        // 1. ì˜ì¡´ì„± ì·¨ì•½ì  ìŠ¤ìº”
        const depVulns = await this.scanDependencies(projectPath);
        report.dependencies = depVulns;

        // 2. ì½”ë“œ ë³´ì•ˆ ì·¨ì•½ì  ìŠ¤ìº”
        const codeVulns = await this.scanCode(projectPath);
        report.codeIssues = codeVulns;

        // 3. AI ê¸°ë°˜ ê³ ê¸‰ ë¶„ì„
        const aiAnalysis = await this.performAIAnalysis(projectPath);
        report.vulnerabilities.push(...aiAnalysis.vulnerabilities);

        // 4. ìœ„í—˜ë„ í‰ê°€
        report.overallRisk = this.assessRisk(report);

        // 5. ê°œì„  ê¶Œì¥ì‚¬í•­ ìƒì„±
        report.recommendations = await this.generateRecommendations(report);

        return report;
    }

    async scanDependencies(projectPath: string): Promise<DependencyVulnerability[]> {
        const packageJson = await this.readPackageJson(projectPath);
        const vulnerabilities: DependencyVulnerability[] = [];

        for (const [pkg, version] of Object.entries(packageJson.dependencies || {})) {
            // Snyk DB ê²€ì‚¬
            const snykVulns = await this.snyk.test(pkg, version as string);
            
            // ìì²´ DB ê²€ì‚¬
            const knownVulns = this.vulnerabilityDB.get(pkg) || [];
            
            for (const vuln of [...snykVulns, ...knownVulns]) {
                if (semver.satisfies(version as string, vuln.affectedVersions)) {
                    vulnerabilities.push({
                        package: pkg,
                        version: version as string,
                        vulnerability: vuln,
                        severity: vuln.severity,
                        fixedIn: vuln.fixedIn,
                        recommendation: `${pkg}ë¥¼ ${vuln.fixedIn} ì´ìƒìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ì„¸ìš”.`
                    });
                }
            }
        }

        return vulnerabilities;
    }

    async scanCode(projectPath: string): Promise<CodeVulnerability[]> {
        const vulnerabilities: CodeVulnerability[] = [];
        const files = await this.getAllSourceFiles(projectPath);

        for (const file of files) {
            const content = await fs.readFile(file, 'utf-8');
            
            // OWASP Top 10 ì²´í¬
            vulnerabilities.push(...await this.checkOWASPTop10(content, file));
            
            // ë¯¼ê°í•œ ì •ë³´ ë…¸ì¶œ ì²´í¬
            vulnerabilities.push(...await this.checkSensitiveData(content, file));
            
            // ì•”í˜¸í™” ì·¨ì•½ì  ì²´í¬
            vulnerabilities.push(...await this.checkCryptography(content, file));
        }

        return vulnerabilities;
    }

    async checkOWASPTop10(code: string, filePath: string): Promise<CodeVulnerability[]> {
        const vulnerabilities: CodeVulnerability[] = [];

        // A01:2021 â€“ Broken Access Control
        const accessControlPatterns = [
            {
                pattern: /router\.(get|post|put|delete)\s*\([^,]+,\s*(?!authenticate)/gi,
                message: 'ì¸ì¦ ë¯¸ë“¤ì›¨ì–´ê°€ ëˆ„ë½ë˜ì—ˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                severity: 'high' as const
            },
            {
                pattern: /req\.user\.\w+\s*===?\s*['"`]admin['"`]/gi,
                message: 'í•˜ë“œì½”ë”©ëœ ê¶Œí•œ ì²´í¬ê°€ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤.',
                severity: 'medium' as const
            }
        ];

        // A02:2021 â€“ Cryptographic Failures
        const cryptoPatterns = [
            {
                pattern: /crypto\.createHash\(['"`]md5['"`]\)/gi,
                message: 'MD5ëŠ” ì•ˆì „í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. SHA-256 ì´ìƒì„ ì‚¬ìš©í•˜ì„¸ìš”.',
                severity: 'high' as const
            },
            {
                pattern: /Math\.random\(\)/gi,
                message: 'ì•”í˜¸í™” ëª©ì ìœ¼ë¡œ Math.random()ì„ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.',
                severity: 'high' as const
            }
        ];

        // A03:2021 â€“ Injection
        const injectionPatterns = [
            {
                pattern: /exec\s*\([^)]*\$\{[^}]+\}[^)]*\)/gi,
                message: 'ëª…ë ¹ì–´ ì£¼ì… ì·¨ì•½ì ì´ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤.',
                severity: 'critical' as const
            },
            {
                pattern: /new Function\s*\([^)]*\$\{[^}]+\}[^)]*\)/gi,
                message: 'ì½”ë“œ ì£¼ì… ì·¨ì•½ì ì´ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤.',
                severity: 'critical' as const
            }
        ];

        const allPatterns = [
            ...accessControlPatterns,
            ...cryptoPatterns,
            ...injectionPatterns
        ];

        for (const { pattern, message, severity } of allPatterns) {
            const matches = code.matchAll(pattern);
            for (const match of matches) {
                const line = code.substring(0, match.index).split('\n').length;
                vulnerabilities.push({
                    type: 'OWASP',
                    severity,
                    file: filePath,
                    line,
                    message,
                    code: match[0],
                    recommendation: await this.getAIRecommendation(match[0], message)
                });
            }
        }

        return vulnerabilities;
    }

    async performAIAnalysis(projectPath: string): Promise<AIAnalysisResult> {
        const prompt = `
í”„ë¡œì íŠ¸ ê²½ë¡œ: ${projectPath}

ë‹¤ìŒ ë³´ì•ˆ ì¸¡ë©´ì„ ë¶„ì„í•´ì£¼ì„¸ìš”:
1. ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ êµ¬í˜„
2. ë°ì´í„° ê²€ì¦ ë° ì‚´ê· 
3. ì—ëŸ¬ ì²˜ë¦¬ ë° ë¡œê¹…
4. ì„¸ì…˜ ê´€ë¦¬
5. API ë³´ì•ˆ
6. íŒŒì¼ ì—…ë¡œë“œ ë³´ì•ˆ
7. ì¨ë“œíŒŒí‹° í†µí•© ë³´ì•ˆ

ê° ì·¨ì•½ì ì— ëŒ€í•´ ë‹¤ìŒì„ í¬í•¨í•´ì£¼ì„¸ìš”:
- ì‹¬ê°ë„ (critical/high/medium/low)
- êµ¬ì²´ì ì¸ ìœ„ì¹˜
- ìˆ˜ì • ë°©ë²•
- ì˜ˆì‹œ ì½”ë“œ
`;

        const response = await this.cursor.ai.analyzeCode(prompt);
        return this.parseAISecurityAnalysis(response);
    }

    async generateRecommendations(report: SecurityReport): Promise<SecurityRecommendation[]> {
        const recommendations: SecurityRecommendation[] = [];

        // ì‹¬ê°í•œ ì·¨ì•½ì ì— ëŒ€í•œ ì¦‰ì‹œ ì¡°ì¹˜ ì‚¬í•­
        const criticalVulns = report.vulnerabilities.filter(v => v.severity === 'critical');
        if (criticalVulns.length > 0) {
            recommendations.push({
                priority: 'immediate',
                title: 'ì‹¬ê°í•œ ë³´ì•ˆ ì·¨ì•½ì  ë°œê²¬',
                description: `${criticalVulns.length}ê°œì˜ ì‹¬ê°í•œ ì·¨ì•½ì ì´ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤. ì¦‰ì‹œ ìˆ˜ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.`,
                actions: criticalVulns.map(v => ({
                    file: v.file,
                    line: v.line,
                    fix: v.recommendation
                }))
            });
        }

        // ì˜ì¡´ì„± ì—…ë°ì´íŠ¸ ê¶Œì¥
        const outdatedDeps = report.dependencies.filter(d => d.fixedIn);
        if (outdatedDeps.length > 0) {
            recommendations.push({
                priority: 'high',
                title: 'ì˜ì¡´ì„± ì—…ë°ì´íŠ¸ í•„ìš”',
                description: `${outdatedDeps.length}ê°œì˜ ì·¨ì•½í•œ ì˜ì¡´ì„±ì´ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤.`,
                actions: outdatedDeps.map(d => ({
                    package: d.package,
                    current: d.version,
                    recommended: d.fixedIn,
                    command: `npm update ${d.package}@${d.fixedIn}`
                }))
            });
        }

        // ë³´ì•ˆ í—¤ë” ì„¤ì •
        recommendations.push({
            priority: 'medium',
            title: 'ë³´ì•ˆ í—¤ë” êµ¬ì„±',
            description: 'HTTP ë³´ì•ˆ í—¤ë”ë¥¼ ì„¤ì •í•˜ì—¬ ì¼ë°˜ì ì¸ ê³µê²©ì„ ë°©ì–´í•˜ì„¸ìš”.',
            actions: [{
                code: `// Express.js ë³´ì•ˆ í—¤ë” ì„¤ì •
app.use(helmet({
    contentSecurityPolicy: {
        directives: {
            defaultSrc: ["'self'"],
            styleSrc: ["'self'", "'unsafe-inline'"],
            scriptSrc: ["'self'"],
            imgSrc: ["'self'", "data:", "https:"],
        },
    },
    hsts: {
        maxAge: 31536000,
        includeSubDomains: true,
        preload: true
    }
}));`
            }]
        });

        return recommendations;
    }

    assessRisk(report: SecurityReport): RiskLevel {
        const criticalCount = report.vulnerabilities.filter(v => v.severity === 'critical').length;
        const highCount = report.vulnerabilities.filter(v => v.severity === 'high').length;
        
        if (criticalCount > 0) return 'critical';
        if (highCount > 5) return 'high';
        if (highCount > 0) return 'medium';
        return 'low';
    }
}

// GitHub Actions ì›Œí¬í”Œë¡œìš°
export async function runSecurityScan() {
    const scanner = new AISecurityScanner();
    const report = await scanner.scanProject(process.cwd());
    
    // ë³´ê³ ì„œ ìƒì„±
    await generateSecurityReport(report);
    
    // ì‹¬ê°í•œ ì·¨ì•½ì ì´ ìˆìœ¼ë©´ ë¹Œë“œ ì‹¤íŒ¨
    if (report.overallRisk === 'critical' || report.overallRisk === 'high') {
        console.error('ğŸš¨ ì‹¬ê°í•œ ë³´ì•ˆ ì·¨ì•½ì ì´ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
        process.exit(1);
    }
}
</code></pre>
                    </div>
                </div>
            </section>

            <section class="practice-section">
                <h2><i class="fas fa-laptop-code"></i> ì‹¤ìŠµ: AI ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ êµ¬ì¶•</h2>
                
                <div class="exercise">
                    <h3>ê³¼ì œ: íŒ€ì„ ìœ„í•œ ìë™ ì½”ë“œ ë¦¬ë·° ë´‡ ë§Œë“¤ê¸°</h3>
                    <p>ë‹¤ìŒ ìš”êµ¬ì‚¬í•­ì„ ë§Œì¡±í•˜ëŠ” ì½”ë“œ ë¦¬ë·° ìë™í™” ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ì„¸ìš”:</p>
                    
                    <div class="requirements">
                        <h4>ìš”êµ¬ì‚¬í•­:</h4>
                        <ul>
                            <li>Pull Request ìƒì„± ì‹œ ìë™ìœ¼ë¡œ ì½”ë“œ ë¦¬ë·° ì‹¤í–‰</li>
                            <li>ì½”ë”© ìŠ¤íƒ€ì¼, ë³µì¡ë„, ë³´ì•ˆ ì·¨ì•½ì  ê²€ì‚¬</li>
                            <li>AI ê¸°ë°˜ ê°œì„  ì œì•ˆ ìƒì„±</li>
                            <li>ë¦¬ë·° ê²°ê³¼ë¥¼ PR ì½”ë©˜íŠ¸ë¡œ ìë™ ì‘ì„±</li>
                            <li>ì‹¬ê°í•œ ì´ìŠˆ ë°œê²¬ ì‹œ PR ë¨¸ì§€ ì°¨ë‹¨</li>
                        </ul>
                    </div>

                    <div class="hints">
                        <h4>íŒíŠ¸:</h4>
                        <ul>
                            <li>GitHub Actionsì™€ Cursor APIë¥¼ ì¡°í•©í•˜ì—¬ ì‚¬ìš©</li>
                            <li>ESLint, TSLint ë“±ì˜ ì •ì  ë¶„ì„ ë„êµ¬ í†µí•©</li>
                            <li>ì½”ë“œ ë³µì¡ë„ëŠ” AST ë¶„ì„ì„ í†µí•´ ê³„ì‚°</li>
                            <li>ë³´ì•ˆ íŒ¨í„´ì€ ì •ê·œì‹ê³¼ AST íŒ¨í„´ ë§¤ì¹­ í™œìš©</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section class="summary-section">
                <h2><i class="fas fa-bookmark"></i> í•µì‹¬ ìš”ì•½</h2>
                <div class="summary-grid">
                    <div class="summary-item">
                        <h3>ìë™ ì½”ë“œ ë¦¬ë·°</h3>
                        <ul>
                            <li>AI ê¸°ë°˜ ì½”ë“œ ë¶„ì„</li>
                            <li>ì‹¤ì‹œê°„ í’ˆì§ˆ ëª¨ë‹ˆí„°ë§</li>
                            <li>PR í†µí•© ìë™í™”</li>
                        </ul>
                    </div>
                    <div class="summary-item">
                        <h3>í’ˆì§ˆ ë©”íŠ¸ë¦­ìŠ¤</h3>
                        <ul>
                            <li>ë³µì¡ë„ ì¸¡ì •</li>
                            <li>ìœ ì§€ë³´ìˆ˜ì„± í‰ê°€</li>
                            <li>í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€</li>
                        </ul>
                    </div>
                    <div class="summary-item">
                        <h3>ë³´ì•ˆ ìŠ¤ìºë‹</h3>
                        <ul>
                            <li>ì·¨ì•½ì  ìë™ íƒì§€</li>
                            <li>ì˜ì¡´ì„± ê²€ì‚¬</li>
                            <li>OWASP ì¤€ìˆ˜ ì²´í¬</li>
                        </ul>
                    </div>
                    <div class="summary-item">
                        <h3>ê°œì„  ìë™í™”</h3>
                        <ul>
                            <li>ë¦¬íŒ©í† ë§ ì œì•ˆ</li>
                            <li>ìë™ ìˆ˜ì • ì ìš©</li>
                            <li>ì§€ì†ì  ê°œì„ </li>
                        </ul>
                    </div>
                </div>
            </section>
        </main>

        <aside class="sidebar">
            <div class="progress-indicator">
                <h3>ì§„í–‰ ìƒí™©</h3>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 76.67%;"></div>
                </div>
                <span>23/30 ê°•ì˜ (76.67%)</span>
            </div>

            <nav class="lesson-nav-sidebar">
                <h3>ì „ì²´ ê°•ì˜</h3>
                <ul>
                    <li><a href="lesson21.html">ì œ21ê°•: AI í˜ì–´ í”„ë¡œê·¸ë˜ë°</a></li>
                    <li><a href="lesson22.html">ì œ22ê°•: ì»¤ìŠ¤í…€ ëª…ë ¹ì–´ ê°œë°œ</a></li>
                    <li class="current">ì œ23ê°•: AI ì½”ë“œ ë¦¬ë·°</li>
                    <li><a href="lesson24.html">ì œ24ê°•: ë¬¸ì„œí™” ìë™í™”</a></li>
                    <li><a href="lesson25.html">ì œ25ê°•: ë§ˆì´ê·¸ë ˆì´ì…˜ ë„êµ¬</a></li>
                </ul>
            </nav>

            <div class="study-tips">
                <h3>í•™ìŠµ íŒ</h3>
                <ul>
                    <li>ì½”ë“œ ë¦¬ë·°ëŠ” ë‹¨ìˆœí•œ ì˜¤ë¥˜ ì°¾ê¸°ê°€ ì•„ë‹Œ ì§€ì‹ ê³µìœ ì˜ ê¸°íšŒì…ë‹ˆë‹¤</li>
                    <li>AI ì œì•ˆì„ ë§¹ëª©ì ìœ¼ë¡œ ë”°ë¥´ì§€ ë§ê³  í•­ìƒ ê²€ì¦í•˜ì„¸ìš”</li>
                    <li>íŒ€ì˜ ì½”ë”© ìŠ¤íƒ€ì¼ì„ AIì—ê²Œ í•™ìŠµì‹œì¼œ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ì„¸ìš”</li>
                    <li>ë³´ì•ˆ ìŠ¤ìº”ì€ ê°œë°œ ì´ˆê¸°ë¶€í„° ì§€ì†ì ìœ¼ë¡œ ìˆ˜í–‰í•˜ì„¸ìš”</li>
                </ul>
            </div>
        </aside>
    </div>

    <script src="../assets/lesson-script.js"></script>
</body>
</html>