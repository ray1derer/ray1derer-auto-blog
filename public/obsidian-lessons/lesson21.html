<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 21: APIì™€ ì›¹í›… í™œìš© | Obsidian ë§ˆìŠ¤í„° í´ë˜ìŠ¤</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="logo">
                <i class="fas fa-brain"></i>
                <span>Obsidian ë§ˆìŠ¤í„° í´ë˜ìŠ¤</span>
            </a>
            <div class="nav-links">
                <a href="index.html#courses">ê°•ì¢Œ ëª©ë¡</a>
                <a href="index.html#about">ì†Œê°œ</a>
                <a href="index.html#contact">ë¬¸ì˜</a>
            </div>
        </div>
    </nav>

    <div class="lesson-container">
        <aside class="sidebar">
            <div class="sidebar-header advanced">
                <h3>ê³ ê¸‰ ê³¼ì •</h3>
                <p>ì „ë¬¸ê°€ ë˜ê¸°</p>
            </div>
            <ul class="lesson-list">
                <li class="active"><a href="lesson21.html">Lesson 21: APIì™€ ì›¹í›… í™œìš©</a></li>
                <li><a href="lesson22.html">Lesson 22: ê³ ê¸‰ ìë™í™” ì‹œìŠ¤í…œ</a></li>
                <li><a href="lesson23.html">Lesson 23: í”ŒëŸ¬ê·¸ì¸ ê°œë°œ ì‹¬í™”</a></li>
                <li><a href="lesson24.html">Lesson 24: ëŒ€ê·œëª¨ ì§€ì‹ ê´€ë¦¬</a></li>
                <li><a href="lesson25.html">Lesson 25: íŒ€ í˜‘ì—… í™˜ê²½ êµ¬ì¶•</a></li>
                <li><a href="lesson26.html">Lesson 26: í¼í¬ë¨¼ìŠ¤ ìµœì í™”</a></li>
                <li><a href="lesson27.html">Lesson 27: ë³´ì•ˆê³¼ ë°±ì—… ì „ëµ</a></li>
                <li><a href="lesson28.html">Lesson 28: í¼ë¸”ë¦¬ì‹±ê³¼ ê³µìœ </a></li>
                <li><a href="lesson29.html">Lesson 29: AI í†µí•© í™œìš©</a></li>
                <li><a href="lesson30.html">Lesson 30: ë¯¸ë˜ì˜ ë…¸íŠ¸ í…Œì´í‚¹</a></li>
            </ul>
        </aside>

        <main class="lesson-content">
            <div class="lesson-header advanced">
                <h1>Lesson 21: APIì™€ ì›¹í›… í™œìš©</h1>
                <p class="lesson-meta">
                    <span><i class="fas fa-clock"></i> 65ë¶„</span>
                    <span><i class="fas fa-signal"></i> ê³ ê¸‰</span>
                </p>
            </div>

            <div class="lesson-section">
                <h2>í•™ìŠµ ëª©í‘œ</h2>
                <ul class="objectives">
                    <li>Obsidianê³¼ ì™¸ë¶€ ì„œë¹„ìŠ¤ í†µí•©ì˜ ê³ ê¸‰ ê¸°ë²•</li>
                    <li>REST API í™œìš©í•œ ë°ì´í„° ì—°ë™</li>
                    <li>ì›¹í›…ì„ í†µí•œ ì‹¤ì‹œê°„ ë™ê¸°í™”</li>
                    <li>ì»¤ìŠ¤í…€ API ì„œë²„ êµ¬ì¶•</li>
                </ul>
            </div>

            <div class="lesson-section">
                <h2>1. Obsidian API ì•„í‚¤í…ì²˜</h2>
                
                <div class="api-architecture">
                    <h3>Obsidianì˜ í™•ì¥ ê°€ëŠ¥ì„±</h3>
                    <p>Obsidianì€ ë‹¤ì–‘í•œ ë°©ë²•ìœ¼ë¡œ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ í†µí•©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                    
                    <div class="architecture-diagram">
                        <div class="architecture-layers">
                            <div class="layer">
                                <h4>Obsidian Core</h4>
                                <ul>
                                    <li>Plugin API</li>
                                    <li>Vault API</li>
                                    <li>Editor API</li>
                                </ul>
                            </div>
                            <div class="layer">
                                <h4>Integration Layer</h4>
                                <ul>
                                    <li>HTTP Requests</li>
                                    <li>WebSockets</li>
                                    <li>Local Server</li>
                                </ul>
                            </div>
                            <div class="layer">
                                <h4>External Services</h4>
                                <ul>
                                    <li>REST APIs</li>
                                    <li>GraphQL</li>
                                    <li>Webhooks</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="api-methods">
                        <h3>í†µí•© ë°©ë²•ë¡ </h3>
                        <div class="method-cards">
                            <div class="method-card">
                                <i class="fas fa-plug"></i>
                                <h4>í”ŒëŸ¬ê·¸ì¸ ê¸°ë°˜</h4>
                                <p>Obsidian í”ŒëŸ¬ê·¸ì¸ ë‚´ì—ì„œ API í˜¸ì¶œ</p>
                            </div>
                            <div class="method-card">
                                <i class="fas fa-server"></i>
                                <h4>ë¡œì»¬ ì„œë²„</h4>
                                <p>ë¡œì»¬ API ì„œë²„ë¡œ ì¤‘ê³„</p>
                            </div>
                            <div class="method-card">
                                <i class="fas fa-cloud"></i>
                                <h4>í´ë¼ìš°ë“œ í•¨ìˆ˜</h4>
                                <p>ì„œë²„ë¦¬ìŠ¤ ì•„í‚¤í…ì²˜ í™œìš©</p>
                            </div>
                            <div class="method-card">
                                <i class="fas fa-sync"></i>
                                <h4>ë™ê¸°í™” ì„œë¹„ìŠ¤</h4>
                                <p>íŒŒì¼ ì‹œìŠ¤í…œ ê°ì‹œì™€ ë™ê¸°í™”</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="lesson-section">
                <h2>2. REST API í†µí•©</h2>
                
                <div class="rest-api-integration">
                    <h3>ì™¸ë¶€ API í™œìš©í•˜ê¸°</h3>
                    
                    <div class="api-example">
                        <h4>Notion API ì—°ë™ í”ŒëŸ¬ê·¸ì¸</h4>
                        <div class="code-example">
                            <pre><code class="language-typescript">import { Plugin, Notice, requestUrl } from 'obsidian';

interface NotionPage {
    id: string;
    properties: {
        title: { title: Array<{ plain_text: string }> };
        status: { select: { name: string } };
    };
}

export default class NotionSyncPlugin extends Plugin {
    private notionToken: string = 'YOUR_NOTION_TOKEN';
    private databaseId: string = 'YOUR_DATABASE_ID';

    async syncFromNotion() {
        try {
            const response = await requestUrl({
                url: `https://api.notion.com/v1/databases/${this.databaseId}/query`,
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${this.notionToken}`,
                    'Notion-Version': '2022-06-28',
                    'Content-Type': 'application/json'
                }
            });

            const pages: NotionPage[] = response.json.results;
            
            for (const page of pages) {
                const title = page.properties.title.title[0]?.plain_text || 'Untitled';
                const status = page.properties.status.select?.name || 'No Status';
                
                const content = `# ${title}\n\nStatus: ${status}\n\nSynced from Notion: ${new Date().toISOString()}`;
                
                await this.app.vault.create(
                    `Notion/${title}.md`,
                    content
                );
            }
            
            new Notice(`Synced ${pages.length} pages from Notion`);
        } catch (error) {
            new Notice('Failed to sync from Notion');
            console.error(error);
        }
    }

    async onload() {
        this.addCommand({
            id: 'sync-from-notion',
            name: 'Sync from Notion',
            callback: () => this.syncFromNotion()
        });
    }
}</code></pre>
                        </div>
                    </div>

                    <div class="api-example">
                        <h4>GitHub Issues ë™ê¸°í™”</h4>
                        <div class="code-example">
                            <pre><code class="language-typescript">class GitHubIssuesSync {
    private token: string;
    private owner: string;
    private repo: string;

    async fetchIssues() {
        const query = `
            query($owner: String!, $repo: String!) {
                repository(owner: $owner, name: $repo) {
                    issues(first: 50, states: OPEN) {
                        nodes {
                            title
                            body
                            number
                            labels(first: 10) {
                                nodes { name }
                            }
                            assignees(first: 5) {
                                nodes { login }
                            }
                        }
                    }
                }
            }
        `;

        const response = await fetch('https://api.github.com/graphql', {
            method: 'POST',
            headers: {
                'Authorization': `Bearer ${this.token}`,
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                query,
                variables: { owner: this.owner, repo: this.repo }
            })
        });

        return response.json();
    }

    formatIssueAsMarkdown(issue: any): string {
        const labels = issue.labels.nodes.map((l: any) => `#${l.name}`).join(' ');
        const assignees = issue.assignees.nodes.map((a: any) => `@${a.login}`).join(', ');

        return `# Issue #${issue.number}: ${issue.title}

${labels}

**Assignees:** ${assignees}

## Description
${issue.body}

---
*Synced: ${new Date().toISOString()}*
[[GitHub Issues]] | [View on GitHub](https://github.com/${this.owner}/${this.repo}/issues/${issue.number})`;
    }
}</code></pre>
                        </div>
                    </div>

                    <div class="api-patterns">
                        <h3>API í†µí•© íŒ¨í„´</h3>
                        <div class="pattern-list">
                            <div class="pattern">
                                <h4>í´ë§ íŒ¨í„´</h4>
                                <p>ì •ê¸°ì ìœ¼ë¡œ APIë¥¼ í˜¸ì¶œí•˜ì—¬ ë³€ê²½ì‚¬í•­ í™•ì¸</p>
                                <div class="code-example">
                                    <pre><code class="language-typescript">setInterval(async () => {
    await this.checkForUpdates();
}, 5 * 60 * 1000); // 5ë¶„ë§ˆë‹¤</code></pre>
                                </div>
                            </div>
                            
                            <div class="pattern">
                                <h4>ìºì‹± ì „ëµ</h4>
                                <p>API í˜¸ì¶œ ìµœì†Œí™”ë¥¼ ìœ„í•œ ë¡œì»¬ ìºì‹±</p>
                                <div class="code-example">
                                    <pre><code class="language-typescript">const cache = new Map();
const CACHE_TTL = 60 * 1000; // 1ë¶„

async function getCachedData(key: string) {
    const cached = cache.get(key);
    if (cached && Date.now() - cached.timestamp < CACHE_TTL) {
        return cached.data;
    }
    
    const data = await fetchFromAPI(key);
    cache.set(key, { data, timestamp: Date.now() });
    return data;
}</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="lesson-section">
                <h2>3. ì›¹í›… êµ¬í˜„</h2>
                
                <div class="webhook-implementation">
                    <h3>ì‹¤ì‹œê°„ ë™ê¸°í™”ë¥¼ ìœ„í•œ ì›¹í›…</h3>
                    
                    <div class="webhook-server">
                        <h4>ë¡œì»¬ ì›¹í›… ì„œë²„</h4>
                        <div class="code-example">
                            <pre><code class="language-javascript">// webhook-server.js
const express = require('express');
const fs = require('fs').promises;
const path = require('path');

const app = express();
app.use(express.json());

const VAULT_PATH = '/path/to/obsidian/vault';

// GitHub ì›¹í›… í•¸ë“¤ëŸ¬
app.post('/webhook/github', async (req, res) => {
    const { action, issue, pull_request } = req.body;
    
    if (action === 'opened' && issue) {
        const content = `# New Issue: ${issue.title}

**Number:** #${issue.number}
**Author:** ${issue.user.login}
**Created:** ${issue.created_at}

## Body
${issue.body}

## Labels
${issue.labels.map(l => `- ${l.name}`).join('\n')}

---
[[GitHub Issues]]`;

        const filename = `Issues/issue-${issue.number}.md`;
        await fs.writeFile(
            path.join(VAULT_PATH, filename),
            content
        );
        
        console.log(`Created: ${filename}`);
    }
    
    res.status(200).send('OK');
});

// Slack ì›¹í›… í•¸ë“¤ëŸ¬
app.post('/webhook/slack', async (req, res) => {
    const { event } = req.body;
    
    if (event.type === 'message' && event.channel_type === 'im') {
        const content = `# Slack Message

**From:** ${event.user}
**Time:** ${new Date(event.ts * 1000).toISOString()}

${event.text}

---
[[Slack Messages]]`;

        const filename = `Slack/${Date.now()}-message.md`;
        await fs.writeFile(
            path.join(VAULT_PATH, filename),
            content
        );
    }
    
    res.status(200).send('OK');
});

app.listen(3000, () => {
    console.log('Webhook server running on port 3000');
});</code></pre>
                        </div>
                    </div>

                    <div class="webhook-integration">
                        <h4>ì›¹í›… í†µí•© ì•„í‚¤í…ì²˜</h4>
                        <div class="architecture-flow">
                            <pre class="mermaid">graph LR
    A[External Service] -->|Webhook| B[Local Server]
    B -->|File System| C[Obsidian Vault]
    C -->|File Watcher| D[Obsidian]
    D -->|Plugin| E[Process & Display]</pre>
                        </div>
                    </div>

                    <div class="security-considerations">
                        <h3>ë³´ì•ˆ ê³ ë ¤ì‚¬í•­</h3>
                        <div class="security-tips">
                            <div class="tip">
                                <h4>ğŸ” ì›¹í›… ê²€ì¦</h4>
                                <div class="code-example">
                                    <pre><code class="language-javascript">const crypto = require('crypto');

function verifyWebhookSignature(payload, signature, secret) {
    const hmac = crypto.createHmac('sha256', secret);
    const digest = 'sha256=' + hmac.update(payload).digest('hex');
    return crypto.timingSafeEqual(
        Buffer.from(signature),
        Buffer.from(digest)
    );
}

app.post('/webhook/github', (req, res) => {
    const signature = req.headers['x-hub-signature-256'];
    if (!verifyWebhookSignature(
        JSON.stringify(req.body),
        signature,
        process.env.WEBHOOK_SECRET
    )) {
        return res.status(401).send('Unauthorized');
    }
    // ì²˜ë¦¬ ë¡œì§...
});</code></pre>
                                </div>
                            </div>
                            
                            <div class="tip">
                                <h4>ğŸ›¡ï¸ ì ‘ê·¼ ì œí•œ</h4>
                                <ul>
                                    <li>IP í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸</li>
                                    <li>HTTPS ì‚¬ìš©</li>
                                    <li>Rate limiting</li>
                                    <li>ì…ë ¥ ê²€ì¦</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="lesson-section">
                <h2>4. ì»¤ìŠ¤í…€ API ì„œë²„</h2>
                
                <div class="custom-api-server">
                    <h3>Obsidianì„ ìœ„í•œ API ì„œë²„ êµ¬ì¶•</h3>
                    
                    <div class="api-server-example">
                        <h4>Node.js API ì„œë²„</h4>
                        <div class="code-example">
                            <pre><code class="language-javascript">// obsidian-api-server.js
const express = require('express');
const cors = require('cors');
const chokidar = require('chokidar');
const matter = require('gray-matter');
const fs = require('fs').promises;
const path = require('path');

const app = express();
app.use(cors());
app.use(express.json());

const VAULT_PATH = process.env.VAULT_PATH;

// ë…¸íŠ¸ ë©”íƒ€ë°ì´í„° ì¸ë±ìŠ¤
const notesIndex = new Map();

// íŒŒì¼ ì‹œìŠ¤í…œ ê°ì‹œ
const watcher = chokidar.watch(VAULT_PATH, {
    ignored: /^\./,
    persistent: true
});

watcher
    .on('add', updateIndex)
    .on('change', updateIndex)
    .on('unlink', removeFromIndex);

async function updateIndex(filePath) {
    if (!filePath.endsWith('.md')) return;
    
    try {
        const content = await fs.readFile(filePath, 'utf8');
        const { data, content: body } = matter(content);
        
        notesIndex.set(filePath, {
            path: filePath,
            title: path.basename(filePath, '.md'),
            metadata: data,
            excerpt: body.substring(0, 200),
            modified: (await fs.stat(filePath)).mtime
        });
    } catch (error) {
        console.error(`Error indexing ${filePath}:`, error);
    }
}

function removeFromIndex(filePath) {
    notesIndex.delete(filePath);
}

// API ì—”ë“œí¬ì¸íŠ¸
app.get('/api/notes', (req, res) => {
    const { tag, search, limit = 50 } = req.query;
    let results = Array.from(notesIndex.values());
    
    if (tag) {
        results = results.filter(note => 
            note.metadata.tags?.includes(tag)
        );
    }
    
    if (search) {
        const searchLower = search.toLowerCase();
        results = results.filter(note =>
            note.title.toLowerCase().includes(searchLower) ||
            note.excerpt.toLowerCase().includes(searchLower)
        );
    }
    
    results.sort((a, b) => b.modified - a.modified);
    results = results.slice(0, parseInt(limit));
    
    res.json(results);
});

app.get('/api/notes/:filename', async (req, res) => {
    const filePath = path.join(VAULT_PATH, req.params.filename + '.md');
    
    try {
        const content = await fs.readFile(filePath, 'utf8');
        const { data, content: body } = matter(content);
        
        res.json({
            filename: req.params.filename,
            metadata: data,
            content: body
        });
    } catch (error) {
        res.status(404).json({ error: 'Note not found' });
    }
});

app.post('/api/notes', async (req, res) => {
    const { title, content, metadata = {} } = req.body;
    
    const filename = title.replace(/[^a-z0-9]/gi, '-').toLowerCase();
    const filePath = path.join(VAULT_PATH, `${filename}.md`);
    
    const frontmatter = matter.stringify(content, metadata);
    
    try {
        await fs.writeFile(filePath, frontmatter);
        res.json({ success: true, filename });
    } catch (error) {
        res.status(500).json({ error: 'Failed to create note' });
    }
});

// GraphQL ì—”ë“œí¬ì¸íŠ¸ (ì„ íƒì‚¬í•­)
const { graphqlHTTP } = require('express-graphql');
const { buildSchema } = require('graphql');

const schema = buildSchema(`
    type Note {
        path: String
        title: String
        metadata: JSON
        excerpt: String
        modified: String
    }
    
    type Query {
        notes(tag: String, search: String, limit: Int): [Note]
        note(filename: String!): Note
    }
    
    type Mutation {
        createNote(title: String!, content: String!, metadata: JSON): Note
    }
    
    scalar JSON
`);

const root = {
    notes: ({ tag, search, limit = 50 }) => {
        // ìœ„ì˜ REST API ë¡œì§ê³¼ ë™ì¼
    },
    note: ({ filename }) => {
        // ìœ„ì˜ REST API ë¡œì§ê³¼ ë™ì¼
    },
    createNote: async ({ title, content, metadata }) => {
        // ìœ„ì˜ REST API ë¡œì§ê³¼ ë™ì¼
    }
};

app.use('/graphql', graphqlHTTP({
    schema: schema,
    rootValue: root,
    graphiql: true
}));

app.listen(4000, () => {
    console.log('Obsidian API Server running on port 4000');
    console.log('GraphQL endpoint: http://localhost:4000/graphql');
});</code></pre>
                        </div>
                    </div>
                </div>
            </div>

            <div class="lesson-section">
                <h2>5. ì‹¤ì „ í†µí•© ì˜ˆì œ</h2>
                
                <div class="integration-examples">
                    <h3>ì™„ì „í•œ í†µí•© ì‹œìŠ¤í…œ êµ¬ì¶•</h3>
                    
                    <div class="example-system">
                        <h4>ğŸ“§ ì´ë©”ì¼ to Obsidian ì‹œìŠ¤í…œ</h4>
                        <div class="system-architecture">
                            <ol>
                                <li>Gmail APIë¡œ ì´ë©”ì¼ ëª¨ë‹ˆí„°ë§</li>
                                <li>íŠ¹ì • ë¼ë²¨ì˜ ì´ë©”ì¼ ì¶”ì¶œ</li>
                                <li>Obsidian ë…¸íŠ¸ë¡œ ë³€í™˜</li>
                                <li>ìë™ ë¶„ë¥˜ ë° íƒœê¹…</li>
                            </ol>
                        </div>
                        
                        <div class="code-example">
                            <pre><code class="language-javascript">// email-to-obsidian.js
const { google } = require('googleapis');
const TurndownService = require('turndown');

class EmailToObsidian {
    constructor(vaultPath) {
        this.vaultPath = vaultPath;
        this.turndown = new TurndownService();
        this.gmail = google.gmail({ version: 'v1' });
    }

    async syncEmails() {
        const auth = await this.authenticate();
        const messages = await this.getMessages(auth, 'label:obsidian-sync');
        
        for (const message of messages) {
            await this.processEmail(auth, message.id);
        }
    }

    async processEmail(auth, messageId) {
        const email = await this.gmail.users.messages.get({
            auth,
            userId: 'me',
            id: messageId
        });

        const subject = this.getHeader(email.data, 'Subject');
        const from = this.getHeader(email.data, 'From');
        const date = this.getHeader(email.data, 'Date');
        const body = this.extractBody(email.data);

        const markdown = this.createMarkdown({
            subject,
            from,
            date,
            body
        });

        const filename = this.sanitizeFilename(subject);
        await this.saveToVault(filename, markdown);
        
        // ì´ë©”ì¼ì— ì²˜ë¦¬ë¨ ë¼ë²¨ ì¶”ê°€
        await this.markAsProcessed(auth, messageId);
    }

    createMarkdown({ subject, from, date, body }) {
        return `---
type: email
from: "${from}"
date: ${date}
tags: [email, inbox]
---

# ${subject}

**From:** ${from}
**Date:** ${date}

---

${this.turndown.turndown(body)}

---
[[Emails]] | [[Inbox]]`;
    }
}</code></pre>
                        </div>
                    </div>

                    <div class="example-system">
                        <h4>ğŸ¤– AI ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸</h4>
                        <div class="code-example">
                            <pre><code class="language-typescript">class AIProcessingPipeline {
    private openaiClient: OpenAI;
    
    async processNote(notePath: string) {
        const content = await this.app.vault.read(notePath);
        const { data, content: body } = matter(content);
        
        // 1. ìš”ì•½ ìƒì„±
        const summary = await this.generateSummary(body);
        
        // 2. í‚¤ì›Œë“œ ì¶”ì¶œ
        const keywords = await this.extractKeywords(body);
        
        // 3. ê´€ë ¨ ë…¸íŠ¸ ì°¾ê¸°
        const relatedNotes = await this.findRelatedNotes(keywords);
        
        // 4. ë©”íƒ€ë°ì´í„° ì—…ë°ì´íŠ¸
        const updatedContent = matter.stringify(body, {
            ...data,
            summary,
            keywords,
            related: relatedNotes,
            processed: new Date().toISOString()
        });
        
        await this.app.vault.modify(notePath, updatedContent);
    }
    
    async generateSummary(text: string): Promise<string> {
        const response = await this.openaiClient.completions.create({
            model: "gpt-3.5-turbo",
            messages: [{
                role: "system",
                content: "Summarize the following text in 2-3 sentences"
            }, {
                role: "user",
                content: text
            }]
        });
        
        return response.choices[0].message.content;
    }
}</code></pre>
                        </div>
                    </div>
                </div>
            </div>

            <div class="lesson-section">
                <h2>6. ì„±ëŠ¥ê³¼ í™•ì¥ì„±</h2>
                
                <div class="performance-optimization">
                    <h3>ëŒ€ê·œëª¨ í†µí•©ì„ ìœ„í•œ ìµœì í™”</h3>
                    
                    <div class="optimization-strategies">
                        <div class="strategy">
                            <h4>ë°°ì¹˜ ì²˜ë¦¬</h4>
                            <div class="code-example">
                                <pre><code class="language-javascript">class BatchProcessor {
    constructor(batchSize = 50, delayMs = 1000) {
        this.queue = [];
        this.batchSize = batchSize;
        this.delayMs = delayMs;
        this.processing = false;
    }
    
    async add(item) {
        this.queue.push(item);
        if (!this.processing) {
            this.startProcessing();
        }
    }
    
    async startProcessing() {
        this.processing = true;
        
        while (this.queue.length > 0) {
            const batch = this.queue.splice(0, this.batchSize);
            await this.processBatch(batch);
            await this.delay(this.delayMs);
        }
        
        this.processing = false;
    }
    
    async processBatch(items) {
        const promises = items.map(item => this.processItem(item));
        await Promise.allSettled(promises);
    }
}</code></pre>
                            </div>
                        </div>
                        
                        <div class="strategy">
                            <h4>ìºì‹± ë ˆì´ì–´</h4>
                            <div class="code-example">
                                <pre><code class="language-javascript">const Redis = require('redis');

class CachingLayer {
    constructor() {
        this.redis = Redis.createClient();
        this.ttl = 3600; // 1 hour
    }
    
    async get(key) {
        const cached = await this.redis.get(key);
        if (cached) {
            return JSON.parse(cached);
        }
        return null;
    }
    
    async set(key, value) {
        await this.redis.setex(
            key,
            this.ttl,
            JSON.stringify(value)
        );
    }
    
    async invalidate(pattern) {
        const keys = await this.redis.keys(pattern);
        if (keys.length > 0) {
            await this.redis.del(keys);
        }
    }
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="lesson-section">
                <h2>ì‹¤ìŠµ í”„ë¡œì íŠ¸</h2>
                
                <div class="project-box">
                    <h3>ğŸŒ í†µí•© ì§€ì‹ ê´€ë¦¬ ì‹œìŠ¤í…œ</h3>
                    <p>ì—¬ëŸ¬ ì†ŒìŠ¤ì˜ ì •ë³´ë¥¼ Obsidianìœ¼ë¡œ í†µí•©í•˜ëŠ” ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ì„¸ìš”.</p>
                    
                    <div class="project-requirements">
                        <h4>í”„ë¡œì íŠ¸ ìš”êµ¬ì‚¬í•­</h4>
                        <ol>
                            <li><strong>ë°ì´í„° ì†ŒìŠ¤ í†µí•© (ìµœì†Œ 3ê°œ)</strong>
                                <ul>
                                    <li>ì´ë©”ì¼ (Gmail API)</li>
                                    <li>ìº˜ë¦°ë” (Google Calendar API)</li>
                                    <li>ì‘ì—… ê´€ë¦¬ (Todoist/Notion API)</li>
                                    <li>ì†Œì…œ ë¯¸ë””ì–´ (Twitter API)</li>
                                </ul>
                            </li>
                            
                            <li><strong>ì‹¤ì‹œê°„ ë™ê¸°í™”</strong>
                                <ul>
                                    <li>ì›¹í›… ì„œë²„ êµ¬í˜„</li>
                                    <li>ì–‘ë°©í–¥ ë™ê¸°í™”</li>
                                    <li>ì¶©ëŒ í•´ê²° ë©”ì»¤ë‹ˆì¦˜</li>
                                </ul>
                            </li>
                            
                            <li><strong>ë°ì´í„° ì²˜ë¦¬</strong>
                                <ul>
                                    <li>ìë™ íƒœê¹…</li>
                                    <li>ê´€ê³„ ì¶”ì¶œ</li>
                                    <li>ìš”ì•½ ìƒì„±</li>
                                </ul>
                            </li>
                            
                            <li><strong>ëª¨ë‹ˆí„°ë§</strong>
                                <ul>
                                    <li>ë™ê¸°í™” ìƒíƒœ ëŒ€ì‹œë³´ë“œ</li>
                                    <li>ì˜¤ë¥˜ ë¡œê¹…</li>
                                    <li>ì„±ëŠ¥ ë©”íŠ¸ë¦­</li>
                                </ul>
                            </li>
                        </ol>
                    </div>

                    <div class="architecture-template">
                        <h4>ì¶”ì²œ ì•„í‚¤í…ì²˜</h4>
                        <div class="code-example">
                            <pre><code class="language-yaml"># docker-compose.yml
version: '3.8'

services:
  api-server:
    build: ./api-server
    ports:
      - "4000:4000"
    environment:
      - VAULT_PATH=/vault
      - REDIS_URL=redis://redis:6379
    volumes:
      - ./vault:/vault

  webhook-server:
    build: ./webhook-server
    ports:
      - "3000:3000"
    environment:
      - VAULT_PATH=/vault
    volumes:
      - ./vault:/vault

  redis:
    image: redis:alpine
    ports:
      - "6379:6379"

  sync-worker:
    build: ./sync-worker
    environment:
      - VAULT_PATH=/vault
      - REDIS_URL=redis://redis:6379
    volumes:
      - ./vault:/vault</code></pre>
                        </div>
                    </div>
                </div>
            </div>

            <div class="lesson-section">
                <h2>í•µì‹¬ ì •ë¦¬</h2>
                <div class="key-points">
                    <div class="point">
                        <i class="fas fa-check-circle"></i>
                        <div>
                            <h4>ë¬´í•œí•œ ì—°ê²°ì„±</h4>
                            <p>APIì™€ ì›¹í›…ìœ¼ë¡œ Obsidianì„ ëª¨ë“  ë””ì§€í„¸ ë„êµ¬ì™€ ì—°ê²°</p>
                        </div>
                    </div>
                    <div class="point">
                        <i class="fas fa-check-circle"></i>
                        <div>
                            <h4>ì‹¤ì‹œê°„ ë™ê¸°í™”</h4>
                            <p>ì›¹í›…ì„ í†µí•œ ì¦‰ê°ì ì¸ ë°ì´í„° ì—…ë°ì´íŠ¸ì™€ ì–‘ë°©í–¥ í†µì‹ </p>
                        </div>
                    </div>
                    <div class="point">
                        <i class="fas fa-check-circle"></i>
                        <div>
                            <h4>í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜</h4>
                            <p>ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ íŒ¨í„´ìœ¼ë¡œ ìœ ì§€ë³´ìˆ˜ê°€ ì‰¬ìš´ í†µí•© ì‹œìŠ¤í…œ</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="navigation-buttons">
                <a href="lesson20.html" class="prev-button">
                    <i class="fas fa-arrow-left"></i> ì´ì „ ê°•ì˜
                </a>
                <a href="lesson22.html" class="next-button">
                    ë‹¤ìŒ ê°•ì˜ <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-typescript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-yaml.min.js"></script>
    <script src="scripts.js"></script>
</body>
</html>